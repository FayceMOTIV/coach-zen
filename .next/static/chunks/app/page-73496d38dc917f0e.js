(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6174:function(e,t,i){Promise.resolve().then(i.bind(i,3841))},3841:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return _}});var n=i(7437),r=i(2265),o=i(5236),s=i(9842),l=i(303);let a=(0,o.ZF)({apiKey:"AIzaSyC2L5aTJph7PH1NFICagEiPxJUv8EJGdRQ",authDomain:"coach-zen.firebaseapp.com",projectId:"coach-zen",storageBucket:"coach-zen.firebasestorage.app",messagingSenderId:"11447267838",appId:"1:11447267838:web:7474c717cc7932c3a910af"}),d=(0,s.ad)(a),c=(0,l.v0)(a),u=new l.hJ,g=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),h=async()=>{try{if(g())return await (0,l.F6)(c,u),{success:!0};{let e=await (0,l.rh)(c,u);return{success:!0,user:e.user}}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:e.message}}},p=async()=>{try{let e=await (0,l.cx)(c);if(e)return{success:!0,user:e.user};return{success:!1}}catch(e){return console.error("Redirect result error:",e),{success:!1,error:e.message}}},b=async(e,t)=>{try{let i=await (0,l.e5)(c,e,t);return{success:!0,user:i.user}}catch(t){console.error("Email sign in error:",t);let e=t.message;return"auth/invalid-credential"===t.code&&(e="Email ou mot de passe incorrect"),"auth/user-not-found"===t.code&&(e="Aucun compte avec cet email"),"auth/wrong-password"===t.code&&(e="Mot de passe incorrect"),{success:!1,error:e}}},x=async(e,t)=>{try{let i=await (0,l.Xb)(c,e,t);return{success:!0,user:i.user}}catch(t){console.error("Sign up error:",t);let e=t.message;return"auth/email-already-in-use"===t.code&&(e="Cet email est d\xe9j\xe0 utilis\xe9"),"auth/weak-password"===t.code&&(e="Mot de passe trop faible (min 6 caract\xe8res)"),"auth/invalid-email"===t.code&&(e="Email invalide"),{success:!1,error:e}}},f=async e=>{try{return await (0,l.LS)(c,e),{success:!0}}catch(t){console.error("Reset password error:",t);let e=t.message;return"auth/user-not-found"===t.code&&(e="Aucun compte avec cet email"),{success:!1,error:e}}},m=async()=>{try{return await (0,l.w7)(c),{success:!0}}catch(e){return{success:!1,error:e.message}}},y=e=>(0,l.Aj)(c,e),j=async(e,t,i)=>{if(e)try{await (0,s.pl)((0,s.JU)(d,"users",e,"data",t),{value:i,updatedAt:new Date().toISOString()})}catch(e){console.error("Firebase save error:",e)}},v=async(e,t,i)=>{if(!e)return i;try{let n=await (0,s.QT)((0,s.JU)(d,"users",e,"data",t));if(n.exists())return n.data().value;return i}catch(e){return console.error("Firebase load error:",e),i}},k=e=>e.toISOString().split("T")[0],D=e=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][e.getDay()],S=e=>["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][e.getMonth()],C=(e,t)=>{try{let i=localStorage.getItem(e);return i?JSON.parse(i):t}catch(e){return t}},w=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Save error:",e)}},z=()=>({habits:{breakfast:!1,fasting:!1,lunch:!1,snack:!1,dinner:!1,plannedTreat:!1},sleep:7,nap:0,energy:3,movement:{workout:!1,walk:!1,run:!1},ecarts:{petit:0,moyen:0,gros:0},customMeals:[],water:0,supplements:{vitaminD:!1,omega3:!1,magnesium:!1,protein:!1,creatine:!1,multivitamin:!1},gratitudes:["","",""]}),R=()=>({poids:75,taille:175,age:30,sexe:"homme",activite:"modere",objectifPoids:70}),A=e=>e?(e.petit||0)+(e.moyen||0)+(e.gros||0):0,W=e=>e?300*(e.petit||0)+600*(e.moyen||0)+1e3*(e.gros||0):0,F=e=>e&&Array.isArray(e)?e.reduce((e,t)=>e+(t.kcal||0),0):0,I=e=>e&&Array.isArray(e)?e.reduce((e,t)=>e+(t.points||0),0):0,B=e=>e?Object.values(e).filter(Boolean).length:0,M=e=>{if(!e)return 0;let t=0;return e.habits&&(e.habits.breakfast&&(t+=20),e.habits.fasting&&(t+=20),e.habits.lunch&&(t+=20),e.habits.snack&&(t+=20),e.habits.dinner&&(t+=20),e.habits.plannedTreat&&(t+=20)),t+=I(e.customMeals),e.sleep>=6.5&&(t+=10),(e.water||0)>=8&&(t+=10),e.movement&&(e.movement.workout&&(t+=5),e.movement.walk&&(t+=5),e.movement.run&&(t+=5)),B(e.supplements)>=3&&(t+=5),(e.gratitudes||[]).filter(e=>e&&e.trim()).length>=3&&(t+=5),Math.max(0,Math.min(t-=10*A(e.ecarts),100))},E=e=>{if(!e)return 1800;let t=e.poids||75,i=e.taille||175,n=e.age||30;return"homme"===e.sexe?Math.round(10*t+6.25*i-5*n+5):Math.round(10*t+6.25*i-5*n-161)},T=(e,t)=>Math.round(e*(({sedentaire:1.2,leger:1.375,modere:1.55,actif:1.725,intense:1.9})[t]||1.55)),P=[{id:"first_day",emoji:"\uD83C\uDF31",name:"Premier pas",desc:"1er jour compl\xe9t\xe9",check:e=>e.totalDays>=1},{id:"week_streak",emoji:"\uD83D\uDD25",name:"Semaine de feu",desc:"7 jours streak",check:e=>e.streak>=7},{id:"month_streak",emoji:"⚡",name:"Inarr\xeatable",desc:"30 jours streak",check:e=>e.streak>=30},{id:"first_kg",emoji:"\uD83D\uDCC9",name:"Premier kilo",desc:"1kg perdu",check:e=>e.weightLoss>=1},{id:"five_kg",emoji:"\uD83C\uDFC6",name:"Champion",desc:"5kg perdus",check:e=>e.weightLoss>=5},{id:"ten_kg",emoji:"\uD83D\uDC51",name:"L\xe9gende",desc:"10kg perdus",check:e=>e.weightLoss>=10},{id:"hydration_master",emoji:"\uD83D\uDCA7",name:"Hydrat\xe9",desc:"7 jours \xe0 8 verres",check:e=>e.hydrationStreak>=7},{id:"supplement_pro",emoji:"\uD83D\uDC8A",name:"Compl\xe9t\xe9",desc:"7 jours de suppl\xe9ments",check:e=>e.supplementStreak>=7},{id:"gratitude_zen",emoji:"\uD83D\uDE4F",name:"Zen Master",desc:"7 jours de gratitude",check:e=>e.gratitudeStreak>=7},{id:"perfect_score",emoji:"\uD83D\uDCAF",name:"Perfectionniste",desc:"Score de 100",check:e=>e.maxScore>=100},{id:"fifty_days",emoji:"\uD83C\uDFAF",name:"D\xe9termin\xe9",desc:"50 jours suivis",check:e=>e.totalDays>=50},{id:"hundred_days",emoji:"\uD83C\uDF1F",name:"Centurion",desc:"100 jours suivis",check:e=>e.totalDays>=100}],O={breakfast:{title:"Petit-d\xe9j",time:"Matin",emoji:"\uD83C\uDF73",colors:["#f97316","#f59e0b"],points:20,kcal:450,items:["6 oeufs","Caf\xe9","Eau + sel"]},fasting:{title:"Je\xfbne",time:"Matin",emoji:"⏱️",colors:["#06b6d4","#0891b2"],points:20,kcal:0,items:["Je\xfbne intermittent","Eau/Caf\xe9 noir"]},lunch:{title:"D\xe9jeuner",time:"Midi",emoji:"\uD83E\uDD57",colors:["#10b981","#14b8a6"],points:20,kcal:850,items:["250g riz","300g prot\xe9ine","L\xe9gumes"]},snack:{title:"Collation",time:"Pr\xe9-sieste",emoji:"\uD83E\uDD5C",colors:["#8b5cf6","#a855f7"],points:20,kcal:200,items:["Yaourt grec","ou oeuf + amandes"]},dinner:{title:"D\xeener",time:"< 20h30",emoji:"\uD83C\uDF72",colors:["#3b82f6","#6366f1"],points:20,kcal:850,items:["250g riz","300g prot\xe9ine","L\xe9gumes"]},plannedTreat:{title:"Craquage",time:"21h-22h",emoji:"\uD83C\uDF6B",colors:["#ec4899","#f43f5e"],points:20,kcal:300,items:["Autoris\xe9","Z\xe9ro culpabilit\xe9"]}},H=[{id:"vitaminD",emoji:"☀️",name:"Vit D"},{id:"omega3",emoji:"\uD83D\uDC1F",name:"Om\xe9ga 3"},{id:"magnesium",emoji:"\uD83E\uDDF2",name:"Magn\xe9sium"},{id:"protein",emoji:"\uD83D\uDCAA",name:"Prot\xe9ine"},{id:"creatine",emoji:"⚡",name:"Cr\xe9atine"},{id:"multivitamin",emoji:"\uD83D\uDC8A",name:"Multi-vit"}],J=[{id:"petit",emoji:"\uD83C\uDF6A",label:"Petit",kcal:300,color:"#f59e0b"},{id:"moyen",emoji:"\uD83C\uDF54",label:"Moyen",kcal:600,color:"#f97316"},{id:"gros",emoji:"\uD83C\uDF55",label:"Gros",kcal:1e3,color:"#ef4444"}];function N(){let[e,t]=(0,r.useState)("login"),[i,o]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[a,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),m=async()=>{d(!0),u("");try{let e=await h();e&&!e.success&&(u(e.error||"Erreur de connexion Google"),d(!1))}catch(e){console.error("Google sign-in error:",e),u("Erreur de connexion Google"),d(!1)}},y=async n=>{if(n.preventDefault(),!a){d(!0),u(""),p("");try{if("login"===e){let e=await b(i,s);e.success||(u(e.error||"Erreur de connexion"),d(!1))}else if("signup"===e){let e=await x(i,s);e.success||(u(e.error||"Erreur inscription"),d(!1))}else if("reset"===e){let e=await f(i);e.success?(p("Email envoy\xe9 ! V\xe9rifie ta bo\xeete mail."),t("login")):u(e.error||"Erreur"),d(!1)}}catch(e){console.error("Auth error:",e),u("Une erreur est survenue"),d(!1)}}};return(0,n.jsx)("div",{style:{minHeight:"100dvh",background:"#0f172a",color:"white",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",display:"flex",alignItems:"center",justifyContent:"center",padding:20},children:(0,n.jsxs)("div",{style:{maxWidth:360,width:"100%"},children:[(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:32},children:[(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:20,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,n.jsx)("span",{style:{fontSize:40},children:"\uD83C\uDF3F"})}),(0,n.jsx)("h1",{style:{fontSize:28,fontWeight:"bold",margin:0,background:"linear-gradient(to right, #c4b5fd, #f9a8d4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Coach Zen"}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",marginTop:8},children:"Ton coach nutrition personnel"})]}),(0,n.jsxs)("button",{onClick:m,disabled:a,style:{width:"100%",padding:16,borderRadius:12,border:"1px solid rgba(255,255,255,0.2)",background:"white",color:"#333",fontSize:16,fontWeight:"bold",cursor:a?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:12,marginBottom:16,opacity:a?.7:1},children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[(0,n.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,n.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,n.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,n.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a?"Connexion...":"Continuer avec Google"]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,margin:"20px 0"},children:[(0,n.jsx)("div",{style:{flex:1,height:1,background:"rgba(255,255,255,0.1)"}}),(0,n.jsx)("span",{style:{color:"rgba(255,255,255,0.4)",fontSize:14},children:"ou"}),(0,n.jsx)("div",{style:{flex:1,height:1,background:"rgba(255,255,255,0.1)"}})]}),(0,n.jsxs)("form",{onSubmit:y,children:[(0,n.jsx)("input",{type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"Email",required:!0,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,marginBottom:12,boxSizing:"border-box"}}),"reset"!==e&&(0,n.jsx)("input",{type:"password",value:s,onChange:e=>l(e.target.value),placeholder:"Mot de passe (min 6 car.)",required:!0,minLength:6,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,marginBottom:12,boxSizing:"border-box"}}),c&&(0,n.jsx)("p",{style:{color:"#ef4444",fontSize:14,margin:"0 0 12px",textAlign:"center"},children:c}),g&&(0,n.jsx)("p",{style:{color:"#22c55e",fontSize:14,margin:"0 0 12px",textAlign:"center"},children:g}),(0,n.jsx)("button",{type:"submit",disabled:a,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:a?"rgba(139,92,246,0.5)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontSize:16,fontWeight:"bold",cursor:a?"wait":"pointer",marginBottom:16},children:a?"...":"login"===e?"Se connecter":"signup"===e?"Cr\xe9er mon compte":"Envoyer le lien"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:["login"===e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{t("reset"),u(""),p("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer",marginBottom:12,display:"block",width:"100%"},children:"Mot de passe oubli\xe9 ?"}),(0,n.jsxs)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:14,margin:0},children:["Pas de compte ? ",(0,n.jsx)("button",{onClick:()=>{t("signup"),u(""),p("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"S'inscrire"})]})]}),"signup"===e&&(0,n.jsxs)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:14,margin:0},children:["D\xe9j\xe0 un compte ? ",(0,n.jsx)("button",{onClick:()=>{t("login"),u(""),p("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"Se connecter"})]}),"reset"===e&&(0,n.jsx)("button",{onClick:()=>{t("login"),u(""),p("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"← Retour"})]})]})})}function _(){var e,t,i;let[o,s]=(0,r.useState)(null),[l,a]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1),[u,g]=(0,r.useState)(!1),[h,b]=(0,r.useState)(""),[x,f]=(0,r.useState)({}),[A,I]=(0,r.useState)("today"),[_,L]=(0,r.useState)(z()),[G,U]=(0,r.useState)(null),[Z,q]=(0,r.useState)(R()),[V,K]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(""),[Y,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)("week"),[ei,en]=(0,r.useState)([]),[er,eo]=(0,r.useState)(!1),[es,el]=(0,r.useState)(75),[ea,ed]=(0,r.useState)(!1),[ec,eu]=(0,r.useState)(""),[eg,eh]=(0,r.useState)(!1),[ep,eb]=(0,r.useState)(null),[ex,ef]=(0,r.useState)(null),[em,ey]=(0,r.useState)(!1),[ej,ev]=(0,r.useState)([]),[ek,eD]=(0,r.useState)(""),[eS,eC]=(0,r.useState)(!1),[ew,ez]=(0,r.useState)(!1),[eR,eA]=(0,r.useState)(null),[eW,eF]=(0,r.useState)([]),[eI,eB]=(0,r.useState)(!1),eM=(0,r.useRef)(null),eE=(0,r.useMemo)(()=>k(new Date),[]),eT=h===eE;(0,r.useEffect)(()=>{let e=!0;p().then(t=>{e&&(t.success&&t.user&&s(t.user),a(!1))}).catch(()=>{e&&a(!1)});let t=y(t=>{e&&(s(t),a(!1))});return()=>{e=!1,t()}},[]);let eP=(0,r.useMemo)(()=>{var e,t,i,n,r;let o=[...ei].sort((e,t)=>new Date(e.date)-new Date(t.date)),s=(null===(e=o[0])||void 0===e?void 0:e.weight)||Z.poids,l=(null===(t=o[o.length-1])||void 0===t?void 0:t.weight)||Z.poids,a=0;for(let e=1;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),(null==x?void 0:x[k(t)])&&M(x[k(t)])>=50)a++;else break}let d=0;for(let e=1;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),(null==x?void 0:null===(i=x[k(t)])||void 0===i?void 0:i.water)>=8)d++;else break}let c=0;for(let e=1;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),B(null==x?void 0:null===(n=x[k(t)])||void 0===n?void 0:n.supplements)>=3)c++;else break}let u=0;for(let e=1;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),((null==x?void 0:null===(r=x[k(t)])||void 0===r?void 0:r.gratitudes)||[]).filter(e=>e&&e.trim()).length>=3)u++;else break}let g=Object.values(x||{}).map(e=>M(e));return{totalDays:Object.keys(x||{}).length,streak:a,weightLoss:s-l,hydrationStreak:d,supplementStreak:c,gratitudeStreak:u,maxScore:g.length?Math.max(...g):0}},[x,ei,Z.poids]);(0,r.useEffect)(()=>{if(!d)return;let e=P.filter(e=>e.check(eP)).map(e=>e.id),t=C("cz_badges",[]),i=e.filter(e=>!t.includes(e));i.length>0&&(eA(P.find(e=>e.id===i[0])),setTimeout(()=>eA(null),3e3)),eF(e),w("cz_badges",e)},[eP,d]),(0,r.useEffect)(()=>{o&&(async()=>{let e=k(new Date);b(e);try{g(!0);let[t,i,n]=await Promise.all([v(o.uid,"allData",{}),v(o.uid,"profile",R()),v(o.uid,"weightHistory",[])]);f(t||{}),q(i||R()),en(Array.isArray(n)?n:[]),L(t&&t[e]?t[e]:z()),g(!1)}catch(e){console.error("Firebase load error:",e),g(!1)}c(!0),fetch("/api/coach/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({energy:3,score:0,slot:"morning"})}).then(e=>e.json()).then(e=>U(e.message||"Le plan commence.")).catch(()=>U("Le plan commence."))})()},[o]),(0,r.useEffect)(()=>{d&&h&&L(x[h]||z())},[h,d,x]),(0,r.useEffect)(()=>{if(!d||!h||!o)return;let e=setTimeout(()=>{let e={...x,[h]:_};f(e),j(o.uid,"allData",e)},500);return()=>clearTimeout(e)},[_,d,h,o]),(0,r.useEffect)(()=>{d&&o&&j(o.uid,"profile",Z)},[Z,d,o]),(0,r.useEffect)(()=>{d&&o&&j(o.uid,"weightHistory",ei)},[ei,d,o]);let eO=async()=>{await m(),f({}),q(R()),en([]),c(!1)},eH=(0,r.useCallback)(e=>{let t=k(new Date);en(i=>[...i.filter(e=>e.date!==t),{date:t,weight:Number(e)}]),q(t=>({...t,poids:Number(e)})),eo(!1)},[]),eJ=(0,r.useCallback)(e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i)return;let n=new FileReader;n.onloadend=()=>ef(n.result),n.readAsDataURL(i)},[]),eN=(0,r.useCallback)(async()=>{if(ec.trim()||ex){eh(!0),eb(null);try{let e=await fetch("/api/coach/food",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:ec,image:ex})}),t=await e.json();eb(t)}catch(e){eb({success:!1,error:"Erreur"})}eh(!1)}},[ec,ex]),e_=(0,r.useCallback)(()=>{ep&&ep.success&&(L(e=>({...e,customMeals:[...e.customMeals||[],{id:Date.now(),name:ep.name,kcal:ep.kcal,points:ep.points,isHealthy:ep.isHealthy,details:ep.details}]})),ed(!1),eu(""),eb(null),ef(null))},[ep]),eL=(0,r.useCallback)(e=>L(t=>({...t,customMeals:(t.customMeals||[]).filter(t=>t.id!==e)})),[]),eG=(0,r.useCallback)(async e=>{$(!0),et(e);try{let t=await fetch("/api/coach/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({allData:x,profile:Z,period:e,weightHistory:ei,stats:eP})}),i=await t.json();X(i.analysis||"Analyse indisponible.")}catch(e){X("Erreur.")}$(!1)},[x,Z,ei,eP]),eU=(0,r.useCallback)(async e=>{if(!e.trim())return;let t={role:"user",content:e};ev(e=>[...e,t]),eD(""),eC(!0);try{let t=await fetch("/api/coach/voice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,allData:x,profile:Z,weightHistory:ei,stats:eP,todayData:_,history:ej.slice(-10)})}),i=await t.json();if(ev(e=>[...e,{role:"assistant",content:i.response}]),"speechSynthesis"in window){let e=new SpeechSynthesisUtterance(i.response);e.lang="fr-FR",speechSynthesis.speak(e)}}catch(e){ev(e=>[...e,{role:"assistant",content:"D\xe9sol\xe9, je n'ai pas pu r\xe9pondre."}])}eC(!1)},[x,Z,ei,ej,eP,_]),eZ=(0,r.useCallback)(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Reconnaissance vocale non support\xe9e.");return}let e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang="fr-FR",e.onstart=()=>ez(!0),e.onend=()=>ez(!1),e.onresult=e=>eU(e.results[0][0].transcript),e.onerror=()=>ez(!1),e.start()},[eU]),eq=M(_),eV=(0,r.useMemo)(()=>Object.entries(O).reduce((e,t)=>{var i;let[n,r]=t;return(null==_?void 0:null===(i=_.habits)||void 0===i?void 0:i[n])?e+r.kcal:e},0),[null==_?void 0:_.habits])+F(_.customMeals)+W(_.ecarts),eK=T(E(Z),null==Z?void 0:Z.activite),eQ=(0,r.useMemo)(()=>{if(!ei.length||!Z.objectifPoids)return null;let e=[...ei].sort((e,t)=>new Date(e.date)-new Date(t.date));if(e.length<2)return null;let t=e.slice(-14),i=t[0],n=t[t.length-1],r=(new Date(n.date)-new Date(i.date))/864e5;if(r<7)return null;let o=(i.weight-n.weight)/r;if(o<=0)return{message:"Phase de maintien",date:null};let s=n.weight-Z.objectifPoids;if(s<=0)return{message:"\uD83C\uDF89 Objectif atteint !",date:null};let l=new Date;return l.setDate(l.getDate()+Math.ceil(s/o)),{message:"".concat((7*o).toFixed(1)," kg/sem"),date:l}},[ei,Z.objectifPoids]),eX=(0,r.useCallback)((e,t)=>{L(i=>{let n={...i.habits||{},[e]:t};return"breakfast"===e&&t&&(n.fasting=!1),"fasting"===e&&t&&(n.breakfast=!1),{...i,habits:n}})},[]),eY=(0,r.useCallback)((e,t)=>L(i=>({...i,movement:{...i.movement||{},[e]:t}})),[]),e$=(0,r.useCallback)((e,t)=>L(i=>({...i,supplements:{...i.supplements||{},[e]:t}})),[]),e0=(0,r.useCallback)((e,t)=>L(i=>{let n=[...i.gratitudes||["","",""]];return n[e]=t,{...i,gratitudes:n}}),[]),e5=eP.streak,e1=(0,r.useMemo)(()=>{let e=[];for(let t=13;t>=0;t--){let i=new Date;i.setDate(i.getDate()-t),e.push(i)}return e},[]),e2=(0,r.useMemo)(()=>{let e=Object.values(x||{}).slice(-30).map(e=>M(e)).filter(e=>e>0);return e.length?Math.round(e.reduce((e,t)=>e+t,0)/e.length):0},[x]),e8=eP.totalDays,e3=(0,r.useMemo)(()=>h?new Date(h+"T12:00:00"):new Date,[h]),e4=(0,r.useMemo)(()=>{let e=[...ei].sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-30);if(!e.length)return[];let t=Math.min(...e.map(e=>e.weight))-2,i=Math.max(...e.map(e=>e.weight))+2;return e.map(e=>({...e,percent:(e.weight-t)/(i-t)*100}))},[ei]),e6={minHeight:"100dvh",background:"#0f172a",color:"white",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",paddingBottom:90},e9={maxWidth:500,margin:"0 auto",padding:"12px 16px 20px"},e7={background:"rgba(255,255,255,0.05)",borderRadius:16,padding:14,marginBottom:12,border:"1px solid rgba(255,255,255,0.1)"};return l?(0,n.jsx)("div",{style:e6,children:(0,n.jsx)("div",{style:e9,children:(0,n.jsx)("p",{style:{textAlign:"center",paddingTop:100},children:"Chargement..."})})}):o?d?(0,n.jsxs)("div",{style:e6,children:[(0,n.jsxs)("div",{style:e9,children:[(0,n.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingTop:8},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("div",{style:{width:32,height:32,borderRadius:10,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:16},children:"\uD83C\uDF3F"})}),(0,n.jsx)("span",{style:{fontSize:18,fontWeight:"bold",background:"linear-gradient(to right, #c4b5fd, #f9a8d4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Coach Zen"}),u&&(0,n.jsx)("span",{style:{fontSize:10,color:"#22c55e"},children:"☁️"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsxs)("button",{onClick:()=>eB(!0),style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer",position:"relative"},children:[(0,n.jsx)("span",{style:{fontSize:14},children:"\uD83C\uDFC6"}),eW.length>0&&(0,n.jsx)("span",{style:{position:"absolute",top:-4,right:-4,background:"#22c55e",color:"white",fontSize:10,width:16,height:16,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:eW.length})]}),(0,n.jsx)("button",{onClick:()=>ey(!0),style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:14},children:"\uD83C\uDF99️"})}),(0,n.jsx)("button",{onClick:()=>{K(!0),eG("week")},style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold"},children:"\uD83E\uDD16"})})]})]}),"today"===A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:12},children:[!eT&&(0,n.jsx)("button",{onClick:()=>b(eE),style:{background:"rgba(139,92,246,0.2)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:8,padding:"6px 14px",marginBottom:8,cursor:"pointer"},children:(0,n.jsx)("span",{style:{color:"#a78bfa",fontSize:12},children:"← Retour \xe0 aujourd'hui"})}),(0,n.jsx)("p",{style:{color:eT?"rgba(255,255,255,0.4)":"#f59e0b",fontSize:12,margin:0},children:eT?D(e3):"⚠️ \xc9dition"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16},children:[(0,n.jsx)("button",{onClick:()=>{let e=new Date(h);e.setDate(e.getDate()-1),b(k(e))},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:8,width:36,height:36,cursor:"pointer",color:"white",fontSize:18},children:"←"}),(0,n.jsxs)("h1",{style:{fontSize:26,fontWeight:"bold",margin:0,color:"white"},children:[e3.getDate()," ",S(e3)]}),(0,n.jsx)("button",{onClick:()=>{let e=new Date(h);e.setDate(e.getDate()+1),e<=new Date&&b(k(e))},style:{background:"rgba(255,255,255,0.1)",border:"none",borderRadius:8,width:36,height:36,cursor:"pointer",color:"white",fontSize:18,opacity:eT?.3:1},disabled:eT,children:"→"})]})]}),eT&&G&&(0,n.jsx)("div",{style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)",padding:2,borderRadius:16,marginBottom:12},children:(0,n.jsx)("div",{style:{background:"rgba(15,23,42,0.95)",borderRadius:14,padding:12},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("div",{style:{width:32,height:32,borderRadius:10,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,n.jsx)("span",{style:{fontWeight:"bold",fontSize:14},children:"Z"})}),(0,n.jsx)("p",{style:{flex:1,fontSize:14,margin:0,lineHeight:1.5},children:G}),(0,n.jsx)("button",{onClick:()=>U(null),style:{background:"none",border:"none",color:"rgba(255,255,255,0.4)",cursor:"pointer",fontSize:18,padding:0},children:"\xd7"})]})})}),(0,n.jsxs)("div",{style:{...e7,display:"flex",alignItems:"center",justifyContent:"space-between",padding:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:16,fontWeight:"bold",margin:0},children:"Score"}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:14,margin:"4px 0"},children:eq>=80?"\uD83D\uDD25 On fire!":eq>=60?"\uD83D\uDCAA Solide":eq>=40?"\uD83D\uDC4D En route":"\uD83C\uDF31 \xc7a pousse"})]}),(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:40,border:"6px solid #8b5cf6",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:28,fontWeight:"bold"},children:eq})})]}),(0,n.jsxs)("div",{style:e7,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,n.jsx)("span",{style:{fontSize:14,color:"rgba(255,255,255,0.6)"},children:"\uD83D\uDD25 Calories"}),(0,n.jsxs)("span",{style:{fontSize:16,fontWeight:"bold",color:eV>eK?"#ef4444":"#10b981"},children:[eV," / ",eK]})]}),(0,n.jsx)("div",{style:{height:8,background:"rgba(255,255,255,0.1)",borderRadius:4,overflow:"hidden"},children:(0,n.jsx)("div",{style:{height:"100%",background:eV>eK?"#ef4444":"#10b981",width:"".concat(Math.min(eV/eK*100,100),"%")}})}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.4)",margin:"8px 0 0",textAlign:"center"},children:eK-eV>0?"\uD83D\uDCC9 D\xe9ficit: −".concat(eK-eV," kcal"):"\uD83D\uDCC8 Surplus: +".concat(Math.abs(eK-eV)," kcal")})]}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(6,182,212,0.1), rgba(8,145,178,0.1))",border:"1px solid rgba(6,182,212,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0},children:"\uD83D\uDCA7 Hydratation"}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"+10 pts si ≥ 8"})]}),(0,n.jsxs)("span",{style:{fontSize:18,fontWeight:"bold",color:(_.water||0)>=8?"#22c55e":"white"},children:[_.water||0,"/8"]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[...Array(8)].map((e,t)=>(0,n.jsx)("button",{onClick:()=>L(e=>({...e,water:t+1})),style:{width:36,height:36,borderRadius:8,border:"none",cursor:"pointer",background:t<(_.water||0)?"#06b6d4":"rgba(255,255,255,0.1)"},children:(0,n.jsx)("span",{style:{fontSize:16},children:t<(_.water||0)?"\uD83D\uDCA7":"○"})},t))})]}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(168,85,247,0.1), rgba(139,92,246,0.1))",border:"1px solid rgba(168,85,247,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0},children:"\uD83D\uDC8A Compl\xe9ments"}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"+5 pts si ≥ 3"})]}),(0,n.jsxs)("span",{style:{fontSize:14,fontWeight:"bold",color:B(_.supplements)>=3?"#22c55e":"white"},children:[B(_.supplements),"/6"]})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:H.map(e=>{var t,i;return(0,n.jsxs)("button",{onClick:()=>{var t;return e$(e.id,!(null===(t=_.supplements)||void 0===t?void 0:t[e.id]))},style:{padding:10,borderRadius:10,border:"none",cursor:"pointer",background:(null===(t=_.supplements)||void 0===t?void 0:t[e.id])?"#8b5cf6":"rgba(255,255,255,0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[(0,n.jsx)("span",{style:{fontSize:18},children:e.emoji}),(0,n.jsx)("span",{style:{fontSize:10,color:(null===(i=_.supplements)||void 0===i?void 0:i[e.id])?"white":"rgba(255,255,255,0.5)"},children:e.name})]},e.id)})})]}),(0,n.jsx)("div",{style:{display:"flex",gap:8,marginBottom:10},children:["breakfast","fasting"].map(e=>{var t,i;return(0,n.jsx)("button",{onClick:()=>{var t;return eX(e,!(null==_?void 0:null===(t=_.habits)||void 0===t?void 0:t[e]))},style:{flex:1,padding:2,borderRadius:14,background:"linear-gradient(135deg, ".concat(O[e].colors[0],", ").concat(O[e].colors[1],")"),border:"none",cursor:"pointer"},children:(0,n.jsx)("div",{style:{background:(null==_?void 0:null===(t=_.habits)||void 0===t?void 0:t[e])?"rgba(255,255,255,0.15)":"rgba(15,23,42,0.95)",borderRadius:12,padding:10},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("div",{style:{width:36,height:36,borderRadius:10,background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:(null==_?void 0:null===(i=_.habits)||void 0===i?void 0:i[e])?"✓":O[e].emoji}),(0,n.jsxs)("div",{style:{flex:1,textAlign:"left"},children:[(0,n.jsx)("p",{style:{fontSize:13,fontWeight:"bold",margin:0},children:O[e].title}),(0,n.jsxs)("p",{style:{fontSize:10,color:"rgba(255,255,255,0.5)",margin:0},children:[O[e].kcal," kcal"]})]})]})})},e)})}),Object.entries(O).filter(e=>{let[t]=e;return!["breakfast","fasting"].includes(t)}).map(e=>{var t,i,r;let[o,s]=e;return(0,n.jsx)("button",{onClick:()=>{var e;return eX(o,!(null==_?void 0:null===(e=_.habits)||void 0===e?void 0:e[o]))},style:{width:"100%",padding:3,borderRadius:18,background:"linear-gradient(135deg, ".concat(s.colors[0],", ").concat(s.colors[1],")"),border:"none",cursor:"pointer",marginBottom:10},children:(0,n.jsx)("div",{style:{background:(null==_?void 0:null===(t=_.habits)||void 0===t?void 0:t[o])?"rgba(255,255,255,0.15)":"rgba(15,23,42,0.95)",borderRadius:15,padding:14},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:12,background:"rgba(255,255,255,0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24},children:(null==_?void 0:null===(i=_.habits)||void 0===i?void 0:i[o])?"✓":s.emoji}),(0,n.jsxs)("div",{style:{flex:1,textAlign:"left"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0},children:s.title}),(0,n.jsxs)("p",{style:{fontSize:12,color:"rgba(255,255,255,0.5)",margin:0},children:[s.time," • ",s.kcal," kcal"]})]}),(0,n.jsx)("div",{style:{padding:"6px 12px",borderRadius:10,background:"rgba(255,255,255,0.1)"},children:(0,n.jsx)("span",{style:{fontSize:14,fontWeight:"bold"},children:(null==_?void 0:null===(r=_.habits)||void 0===r?void 0:r[o])?"✓":"+20"})})]})})},o)}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(34,197,94,0.1), rgba(16,185,129,0.1))",border:"1px solid rgba(34,197,94,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0},children:"\uD83E\uDD57 Repas libres"}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"\uD83D\uDCF7 Photo ou texte"})]}),(0,n.jsx)("button",{onClick:()=>ed(!0),style:{background:"linear-gradient(135deg, #22c55e, #10b981)",border:"none",borderRadius:10,padding:"8px 14px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold"},children:"+ Ajouter"})})]}),(null===(e=_.customMeals)||void 0===e?void 0:e.length)>0?_.customMeals.map(e=>(0,n.jsx)("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:12,padding:12,marginBottom:8},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("span",{children:e.isHealthy?"✅":"⚠️"}),(0,n.jsx)("span",{style:{fontWeight:"bold"},children:e.name})]}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0 0"},children:e.details}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginTop:6},children:[(0,n.jsxs)("span",{style:{fontSize:12,color:"#22c55e"},children:[e.kcal," kcal"]}),(0,n.jsxs)("span",{style:{fontSize:12,color:e.points>=10?"#22c55e":"#f59e0b"},children:["+",e.points," pts"]})]})]}),(0,n.jsx)("button",{onClick:()=>eL(e.id),style:{background:"rgba(239,68,68,0.2)",border:"none",borderRadius:6,width:28,height:28,cursor:"pointer",color:"#ef4444"},children:"\xd7"})]})},e.id)):(0,n.jsx)("p",{style:{fontSize:12,color:"rgba(255,255,255,0.3)",textAlign:"center",margin:0},children:"Aucun repas libre"})]}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(239,68,68,0.1), rgba(249,115,22,0.1))",border:"1px solid rgba(239,68,68,0.2)"},children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:"0 0 12px"},children:"\uD83C\uDF54 \xc9carts (-10 pts)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:J.map(e=>{var t,i;return(0,n.jsxs)("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:12,padding:10,textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:24},children:e.emoji}),(0,n.jsxs)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0"},children:[e.kcal," kcal"]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:8},children:[(0,n.jsx)("button",{onClick:()=>L(t=>{var i;return{...t,ecarts:{...t.ecarts||{},[e.id]:Math.max(0,((null===(i=t.ecarts)||void 0===i?void 0:i[e.id])||0)-1)}}}),style:{width:28,height:28,borderRadius:6,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,cursor:"pointer"},children:"−"}),(0,n.jsx)("span",{style:{fontSize:18,fontWeight:"bold",color:((null===(t=_.ecarts)||void 0===t?void 0:t[e.id])||0)>0?e.color:"white"},children:(null===(i=_.ecarts)||void 0===i?void 0:i[e.id])||0}),(0,n.jsx)("button",{onClick:()=>L(t=>{var i;return{...t,ecarts:{...t.ecarts||{},[e.id]:((null===(i=t.ecarts)||void 0===i?void 0:i[e.id])||0)+1}}}),style:{width:28,height:28,borderRadius:6,border:"none",background:"".concat(e.color,"40"),color:"white",fontSize:16,cursor:"pointer"},children:"+"})]})]},e.id)})})]}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(251,191,36,0.1), rgba(245,158,11,0.1))",border:"1px solid rgba(251,191,36,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0},children:"\uD83D\uDE4F Gratitudes"}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"+5 pts si 3 remplies"})]}),(0,n.jsxs)("span",{style:{fontSize:14,color:(_.gratitudes||[]).filter(e=>null==e?void 0:e.trim()).length>=3?"#22c55e":"rgba(255,255,255,0.5)"},children:[(_.gratitudes||[]).filter(e=>null==e?void 0:e.trim()).length,"/3"]})]}),[0,1,2].map(e=>{var t;return(0,n.jsx)("input",{value:(null===(t=_.gratitudes)||void 0===t?void 0:t[e])||"",onChange:t=>e0(e,t.target.value),placeholder:"".concat(e+1,". Je suis reconnaissant pour..."),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,marginBottom:8,boxSizing:"border-box"}},e)})]}),(0,n.jsxs)("div",{style:e7,children:[(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:14,marginBottom:10},children:"⚡ \xc9nergie"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:[{v:1,e:"\uD83D\uDE34",c:"#ef4444"},{v:2,e:"\uD83D\uDE14",c:"#f97316"},{v:3,e:"\uD83D\uDE10",c:"#eab308"},{v:4,e:"\uD83D\uDE42",c:"#22c55e"},{v:5,e:"\uD83D\uDCAA",c:"#14b8a6"}].map(e=>(0,n.jsx)("button",{onClick:()=>L(t=>({...t,energy:e.v})),style:{padding:12,borderRadius:12,border:"none",cursor:"pointer",background:_.energy===e.v?e.c:"rgba(255,255,255,0.05)",fontSize:24},children:e.e},e.v))})]}),(0,n.jsxs)("div",{style:e7,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,n.jsx)("span",{style:{color:"rgba(255,255,255,0.6)"},children:"\uD83C\uDF19 Sommeil"}),(0,n.jsxs)("span",{style:{fontWeight:"bold"},children:[_.sleep||7,"h"]})]}),(0,n.jsx)("input",{type:"range",min:0,max:9,step:.5,value:_.sleep||7,onChange:e=>L(t=>({...t,sleep:Number(e.target.value)})),style:{width:"100%"}})]}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.4)",fontSize:12,marginBottom:8},children:"\uD83C\uDFC3 Activit\xe9 (+5 pts)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,marginBottom:20},children:[{key:"workout",emoji:"\uD83C\uDFCB️",label:"Muscu",color:"#ec4899"},{key:"run",emoji:"\uD83C\uDFC3",label:"Course",color:"#f59e0b"},{key:"walk",emoji:"\uD83D\uDEB6",label:"Marche",color:"#06b6d4"}].map(e=>{var t,i;return(0,n.jsxs)("button",{onClick:()=>{var t;return eY(e.key,!(null===(t=_.movement)||void 0===t?void 0:t[e.key]))},style:{padding:14,borderRadius:12,border:"none",cursor:"pointer",background:(null===(t=_.movement)||void 0===t?void 0:t[e.key])?e.color:"rgba(255,255,255,0.05)",display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[(0,n.jsx)("span",{style:{fontSize:24},children:e.emoji}),(0,n.jsx)("span",{style:{color:(null===(i=_.movement)||void 0===i?void 0:i[e.key])?"white":"rgba(255,255,255,0.5)",fontSize:12},children:e.label})]},e.key)})})]}),"week"===A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:14},children:"Semaine"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:14},children:[(0,n.jsxs)("div",{style:{background:"#8b5cf6",borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:32,fontWeight:"bold",margin:0},children:e5}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:12},children:"\uD83D\uDD25 streak"})]}),(0,n.jsxs)("div",{style:{background:"#06b6d4",borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:32,fontWeight:"bold",margin:0},children:e2}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:12},children:"moy/30j"})]})]}),(0,n.jsxs)("div",{style:e7,children:[(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:12,marginBottom:10},children:"\uD83D\uDCC5 Clique pour \xe9diter"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4},children:e1.map((e,t)=>{let i=k(e),r=null==x?void 0:x[i],o=r?M(r):0;return(0,n.jsxs)("button",{onClick:()=>{b(i),I("today")},style:{textAlign:"center",padding:6,borderRadius:10,background:i===h?"#8b5cf6":"transparent",border:"none",cursor:"pointer"},children:[(0,n.jsx)("p",{style:{fontSize:9,color:"rgba(255,255,255,0.4)",margin:0},children:D(e)}),(0,n.jsx)("p",{style:{fontSize:12,margin:"3px 0"},children:e.getDate()}),(0,n.jsx)("div",{style:{width:26,height:26,margin:"0 auto",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:"bold",background:r?o>=80?"#10b981":o>=50?"#f59e0b":"#ef4444":"rgba(255,255,255,0.05)"},children:r?o:"–"})]},t)})})]})]}),"plan"===A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:14},children:"Mon Plan"}),(0,n.jsx)("div",{style:e7,children:(0,n.jsxs)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:14,margin:0},children:["Total: ",(0,n.jsx)("strong",{style:{color:"#10b981"},children:"2650 kcal"})," • TDEE: ",(0,n.jsxs)("strong",{style:{color:"#06b6d4"},children:[eK," kcal"]})]})}),Object.entries(O).filter(e=>{let[t]=e;return"fasting"!==t}).map(e=>{let[t,i]=e;return(0,n.jsx)("div",{style:{background:"linear-gradient(135deg, ".concat(i.colors[0],", ").concat(i.colors[1],")"),borderRadius:16,padding:14,marginBottom:10},children:(0,n.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,n.jsx)("div",{style:{width:50,height:50,borderRadius:12,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:26},children:i.emoji})}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0},children:i.title}),(0,n.jsxs)("span",{style:{fontSize:12,background:"rgba(255,255,255,0.2)",padding:"4px 10px",borderRadius:8},children:[i.kcal," kcal"]})]}),(0,n.jsx)("p",{style:{fontSize:11,margin:"4px 0 0",opacity:.8},children:i.time}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:i.items.map((e,t)=>(0,n.jsx)("span",{style:{fontSize:10,background:"rgba(255,255,255,0.2)",padding:"4px 8px",borderRadius:6},children:e},t))})]})]})},t)})]}),"stats"===A&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:14},children:"Profil"}),(0,n.jsxs)("div",{style:{...e7,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("div",{style:{width:40,height:40,borderRadius:20,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:18},children:(null==o?void 0:null===(t=o.displayName)||void 0===t?void 0:t[0])||(null==o?void 0:null===(i=o.email)||void 0===i?void 0:i[0])||"?"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0},children:(null==o?void 0:o.displayName)||"Utilisateur"}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:null==o?void 0:o.email})]})]}),(0,n.jsx)("button",{onClick:eO,style:{background:"rgba(239,68,68,0.2)",border:"none",borderRadius:8,padding:"8px 12px",cursor:"pointer",color:"#ef4444",fontSize:12},children:"D\xe9connexion"})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,marginBottom:14},children:[(0,n.jsxs)("div",{style:{background:"#10b981",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0},children:e8}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,opacity:.8},children:"jours"})]}),(0,n.jsxs)("div",{style:{background:"#8b5cf6",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0},children:e5}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,opacity:.8},children:"\uD83D\uDD25 streak"})]}),(0,n.jsxs)("div",{style:{background:"#f59e0b",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0},children:e2}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,opacity:.8},children:"moy"})]})]}),(0,n.jsxs)("div",{style:{...e7,background:"linear-gradient(135deg, rgba(139,92,246,0.1), rgba(236,72,153,0.1))",border:"1px solid rgba(139,92,246,0.2)"},children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:"rgba(255,255,255,0.6)",margin:"0 0 10px"},children:"\uD83C\uDFAF OBJECTIF"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:12},children:[(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"Actuel"}),(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0},children:[Z.poids," kg"]})]}),(0,n.jsx)("span",{style:{fontSize:24,color:"rgba(255,255,255,0.3)"},children:"→"}),(0,n.jsxs)("div",{style:{flex:1,textAlign:"right"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:0},children:"Objectif"}),(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"#22c55e"},children:[Z.objectifPoids," kg"]})]})]}),(null==eQ?void 0:eQ.date)&&(0,n.jsx)("div",{style:{background:"rgba(0,0,0,0.2)",borderRadius:10,padding:10},children:(0,n.jsxs)("p",{style:{fontSize:12,color:"#22c55e",margin:0},children:["\uD83D\uDCC8 ",eQ.message," → ",eQ.date.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})})]}),e4.length>1&&(0,n.jsxs)("div",{style:e7,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:"rgba(255,255,255,0.6)",margin:"0 0 10px"},children:"\uD83D\uDCCA \xc9VOLUTION"}),(0,n.jsx)("div",{style:{height:100,display:"flex",alignItems:"flex-end",gap:2},children:e4.map((e,t)=>(0,n.jsx)("div",{style:{flex:1,height:"".concat(e.percent,"%"),minHeight:4,background:"linear-gradient(180deg, #8b5cf6, #ec4899)",borderRadius:2}},t))})]}),(0,n.jsx)("button",{onClick:()=>{el(Z.poids),eo(!0)},style:{width:"100%",padding:14,borderRadius:12,border:"none",cursor:"pointer",background:"#06b6d4",marginBottom:14},children:(0,n.jsx)("span",{style:{fontSize:14,fontWeight:"bold"},children:"⚖️ Enregistrer poids"})}),(0,n.jsxs)("div",{style:e7,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:"rgba(255,255,255,0.6)",margin:"0 0 10px"},children:"⚙️ PROFIL"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:"rgba(255,255,255,0.5)"},children:"Poids"}),(0,n.jsx)("input",{type:"number",value:Z.poids,onChange:e=>q(t=>({...t,poids:Number(e.target.value)||75})),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(255,255,255,0.1)",color:"white",marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:"#22c55e"},children:"\uD83C\uDFAF Objectif"}),(0,n.jsx)("input",{type:"number",value:Z.objectifPoids,onChange:e=>q(t=>({...t,objectifPoids:Number(e.target.value)||70})),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(34,197,94,0.2)",color:"#22c55e",marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:"rgba(255,255,255,0.5)"},children:"Taille"}),(0,n.jsx)("input",{type:"number",value:Z.taille,onChange:e=>q(t=>({...t,taille:Number(e.target.value)||175})),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(255,255,255,0.1)",color:"white",marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:"rgba(255,255,255,0.5)"},children:"\xc2ge"}),(0,n.jsx)("input",{type:"number",value:Z.age,onChange:e=>q(t=>({...t,age:Number(e.target.value)||30})),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(255,255,255,0.1)",color:"white",marginTop:4,boxSizing:"border-box",fontSize:16}})]})]})]})]})]}),(0,n.jsx)("nav",{style:{position:"fixed",bottom:0,left:0,right:0,background:"rgba(15,23,42,0.98)",borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-around",padding:"8px 0 24px",zIndex:9999},children:[{id:"today",icon:"\uD83C\uDFE0",label:"Aujourd'hui"},{id:"week",icon:"\uD83D\uDCC5",label:"Semaine"},{id:"plan",icon:"\uD83D\uDCD6",label:"Plan"},{id:"stats",icon:"⚙️",label:"Profil"}].map(e=>(0,n.jsxs)("button",{onClick:()=>I(e.id),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:6},children:[(0,n.jsx)("div",{style:{width:40,height:40,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",background:A===e.id?"#8b5cf6":"transparent"},children:(0,n.jsx)("span",{style:{fontSize:18},children:e.icon})}),(0,n.jsx)("span",{style:{fontSize:10,color:A===e.id?"white":"rgba(255,255,255,0.4)"},children:e.label})]},e.id))}),er&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>eo(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:320,width:"100%"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:"⚖️ Pes\xe9e"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:20},children:[(0,n.jsx)("button",{onClick:()=>el(e=>Math.max(40,Math.round((e-.1)*10)/10)),style:{width:50,height:50,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:24,cursor:"pointer"},children:"−"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:40,fontWeight:"bold"},children:es.toFixed(1)}),(0,n.jsx)("span",{style:{fontSize:18,color:"rgba(255,255,255,0.5)",marginLeft:4},children:"kg"})]}),(0,n.jsx)("button",{onClick:()=>el(e=>Math.min(200,Math.round((e+.1)*10)/10)),style:{width:50,height:50,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:24,cursor:"pointer"},children:"+"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:()=>eo(!1),style:{flex:1,padding:14,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",cursor:"pointer"},children:"Annuler"}),(0,n.jsx)("button",{onClick:()=>eH(es),style:{flex:1,padding:14,borderRadius:12,border:"none",background:"#06b6d4",color:"white",fontWeight:"bold",cursor:"pointer"},children:"OK"})]})]})}),ea&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>{ed(!1),eb(null),eu(""),ef(null)},children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:"\uD83E\uDD57 Ajouter un repas"}),(0,n.jsx)("button",{onClick:()=>{var e;return null===(e=eM.current)||void 0===e?void 0:e.click()},style:{width:"100%",padding:14,borderRadius:12,border:"2px dashed rgba(255,255,255,0.2)",background:"transparent",color:"white",cursor:"pointer",marginBottom:12},children:"\uD83D\uDCF7 Prendre une photo"}),(0,n.jsx)("input",{ref:eM,type:"file",accept:"image/*",capture:"environment",onChange:eJ,style:{display:"none"}}),ex&&(0,n.jsx)("img",{src:ex,alt:"Repas",style:{width:"100%",borderRadius:12,marginBottom:12}}),(0,n.jsx)("textarea",{value:ec,onChange:e=>eu(e.target.value),placeholder:"Ou d\xe9cris ton repas...",style:{width:"100%",padding:12,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,minHeight:60,resize:"none",boxSizing:"border-box",marginBottom:12}}),!ep&&(0,n.jsx)("button",{onClick:eN,disabled:eg||!ec.trim()&&!ex,style:{width:"100%",padding:14,borderRadius:12,border:"none",cursor:"pointer",background:eg?"rgba(255,255,255,0.1)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontWeight:"bold",marginBottom:12},children:eg?"\uD83E\uDD16 Analyse...":"\uD83E\uDD16 Analyser"}),ep&&(0,n.jsxs)("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:12,padding:14,marginBottom:16},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,n.jsx)("span",{style:{fontSize:20},children:ep.isHealthy?"✅":"⚠️"}),(0,n.jsx)("span",{style:{fontSize:16,fontWeight:"bold"},children:ep.name})]}),(0,n.jsx)("p",{style:{fontSize:12,color:"rgba(255,255,255,0.6)",margin:"0 0 12px"},children:ep.details}),(0,n.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,n.jsxs)("div",{style:{flex:1,background:"rgba(34,197,94,0.1)",borderRadius:8,padding:10,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:20,fontWeight:"bold",color:"#22c55e",margin:0},children:ep.kcal}),(0,n.jsx)("p",{style:{fontSize:10,color:"rgba(255,255,255,0.5)",margin:0},children:"kcal"})]}),(0,n.jsxs)("div",{style:{flex:1,background:"rgba(139,92,246,0.1)",borderRadius:8,padding:10,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:20,fontWeight:"bold",color:"#8b5cf6",margin:0},children:["+",ep.points]}),(0,n.jsx)("p",{style:{fontSize:10,color:"rgba(255,255,255,0.5)",margin:0},children:"pts"})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:()=>{ed(!1),eb(null),eu(""),ef(null)},style:{flex:1,padding:14,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",cursor:"pointer"},children:"Annuler"}),ep&&(0,n.jsx)("button",{onClick:e_,style:{flex:1,padding:14,borderRadius:12,border:"none",background:"#22c55e",color:"white",fontWeight:"bold",cursor:"pointer"},children:"Ajouter"})]})]})}),V&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>K(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:0},children:"\uD83E\uDD16 Analyse IA"}),(0,n.jsx)("button",{onClick:()=>K(!1),style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginBottom:16},children:[(0,n.jsx)("button",{onClick:()=>eG("week"),style:{flex:1,padding:12,borderRadius:10,border:"none",cursor:"pointer",background:"week"===ee?"#8b5cf6":"rgba(255,255,255,0.1)",color:"white",fontWeight:"bold"},children:"7 jours"}),(0,n.jsx)("button",{onClick:()=>eG("month"),style:{flex:1,padding:12,borderRadius:10,border:"none",cursor:"pointer",background:"month"===ee?"#8b5cf6":"rgba(255,255,255,0.1)",color:"white",fontWeight:"bold"},children:"30 jours"})]}),Y?(0,n.jsx)("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.5)"},children:"Analyse..."}):(0,n.jsx)("div",{style:{fontSize:14,color:"rgba(255,255,255,0.9)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:Q})]})}),em&&(0,n.jsxs)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.95)",zIndex:1e4,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:16,borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("h2",{style:{fontSize:18,fontWeight:"bold",margin:0},children:"\uD83C\uDF99️ Coach Zen"}),(0,n.jsx)("button",{onClick:()=>ey(!1),style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{flex:1,overflow:"auto",padding:16},children:[0===ej.length&&(0,n.jsxs)("div",{style:{textAlign:"center",paddingTop:40},children:[(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:40,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:40},children:"\uD83E\uDDD8"})}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:16},children:"Salut ! Je connais tout ton parcours."}),(0,n.jsx)("div",{style:{marginTop:20,display:"flex",flexWrap:"wrap",gap:8,justifyContent:"center"},children:["Comment je progresse ?","Conseils pour aujourd'hui","Analyse mes habitudes"].map((e,t)=>(0,n.jsx)("button",{onClick:()=>eU(e),style:{padding:"8px 14px",borderRadius:20,background:"rgba(255,255,255,0.1)",border:"none",color:"white",fontSize:12,cursor:"pointer"},children:e},t))})]}),ej.map((e,t)=>(0,n.jsx)("div",{style:{marginBottom:12,display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start"},children:(0,n.jsx)("div",{style:{maxWidth:"80%",padding:12,borderRadius:16,background:"user"===e.role?"#8b5cf6":"rgba(255,255,255,0.1)"},children:(0,n.jsx)("p",{style:{fontSize:14,margin:0,lineHeight:1.5},children:e.content})})},t)),eS&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:(0,n.jsx)("div",{style:{padding:12,borderRadius:16,background:"rgba(255,255,255,0.1)"},children:(0,n.jsx)("p",{style:{margin:0},children:"..."})})})]}),(0,n.jsxs)("div",{style:{padding:16,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:eZ,style:{width:50,height:50,borderRadius:25,border:"none",background:ew?"#ef4444":"#06b6d4",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:20},children:ew?"\uD83D\uDD34":"\uD83C\uDF99️"})}),(0,n.jsx)("input",{value:ek,onChange:e=>eD(e.target.value),onKeyDown:e=>"Enter"===e.key&&eU(ek),placeholder:"Message...",enterKeyHint:"send",autoComplete:"off",style:{flex:1,padding:14,borderRadius:25,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16}}),(0,n.jsx)("button",{onClick:()=>eU(ek),disabled:!ek.trim(),style:{width:50,height:50,borderRadius:25,border:"none",background:ek.trim()?"#8b5cf6":"rgba(255,255,255,0.1)",cursor:"pointer"},children:(0,n.jsx)("span",{children:"→"})})]})]}),eI&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>eB(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:["\uD83C\uDFC6 Badges (",eW.length,"/",P.length,")"]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:P.map(e=>(0,n.jsxs)("div",{style:{background:eW.includes(e.id)?"rgba(139,92,246,0.2)":"rgba(255,255,255,0.05)",borderRadius:12,padding:12,textAlign:"center",opacity:eW.includes(e.id)?1:.4},children:[(0,n.jsx)("span",{style:{fontSize:28},children:e.emoji}),(0,n.jsx)("p",{style:{fontSize:11,fontWeight:"bold",margin:"4px 0 0"},children:e.name}),(0,n.jsx)("p",{style:{fontSize:9,color:"rgba(255,255,255,0.5)",margin:"2px 0 0"},children:e.desc})]},e.id))})]})}),eR&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:80},children:eR.emoji}),(0,n.jsx)("h2",{style:{fontSize:24,fontWeight:"bold",margin:"16px 0 8px"},children:"\uD83C\uDF89 Badge d\xe9bloqu\xe9 !"}),(0,n.jsx)("p",{style:{fontSize:18,color:"#a78bfa"},children:eR.name}),(0,n.jsx)("p",{style:{fontSize:14,color:"rgba(255,255,255,0.5)"},children:eR.desc})]})})]}):(0,n.jsx)("div",{style:e6,children:(0,n.jsx)("div",{style:e9,children:(0,n.jsx)("p",{style:{textAlign:"center",paddingTop:100},children:"Chargement des donn\xe9es..."})})}):(0,n.jsx)(N,{})}}},function(e){e.O(0,[117,609,67,971,23,744],function(){return e(e.s=6174)}),_N_E=e.O()}]);