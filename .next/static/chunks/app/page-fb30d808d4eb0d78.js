(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6174:function(e,t,i){Promise.resolve().then(i.bind(i,3841))},3841:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return P}});var n=i(7437),r=i(2265),o=i(5236),l=i(9842),s=i(303);let d=0===(0,o.C6)().length?(0,o.ZF)({apiKey:"AIzaSyC2L5aTJph7PH1NFICagEiPxJUv8EJGdRQ",authDomain:"coach-zen.firebaseapp.com",projectId:"coach-zen",storageBucket:"coach-zen.firebasestorage.app",messagingSenderId:"11447267838",appId:"1:11447267838:web:7474c717cc7932c3a910af"}):(0,o.C6)()[0],a=(0,l.ad)(d),c=(0,s.v0)(d);(0,s.Fb)(c,s.a$).catch(console.error);let g=async(e,t)=>{try{let i=await (0,s.e5)(c,e,t);return{success:!0,user:i.user}}catch(t){let e=t.message;return"auth/invalid-credential"===t.code&&(e="Email ou mot de passe incorrect"),"auth/user-not-found"===t.code&&(e="Aucun compte avec cet email"),"auth/wrong-password"===t.code&&(e="Mot de passe incorrect"),{success:!1,error:e}}},u=async(e,t)=>{try{let i=await (0,s.Xb)(c,e,t);return{success:!0,user:i.user}}catch(t){let e=t.message;return"auth/email-already-in-use"===t.code&&(e="Cet email est d\xe9j\xe0 utilis\xe9"),"auth/weak-password"===t.code&&(e="Mot de passe trop faible (min 6 caract\xe8res)"),"auth/invalid-email"===t.code&&(e="Email invalide"),{success:!1,error:e}}},p=async e=>{try{return await (0,s.LS)(c,e),{success:!0}}catch(t){let e=t.message;return"auth/user-not-found"===t.code&&(e="Aucun compte avec cet email"),"auth/invalid-email"===t.code&&(e="Email invalide"),{success:!1,error:e}}},h=async()=>{try{return await (0,s.w7)(c),{success:!0}}catch(e){return{success:!1,error:e.message}}},x=e=>(0,s.Aj)(c,e),b=async(e,t,i)=>{if(e)try{await (0,l.pl)((0,l.JU)(a,"users",e,"data",t),{value:i,updatedAt:new Date().toISOString()})}catch(e){console.error("Firebase save error:",e)}},f=async(e,t,i)=>{if(!e)return i;try{let n=await (0,l.QT)((0,l.JU)(a,"users",e,"data",t));if(n.exists())return n.data().value;return i}catch(e){return console.error("Firebase load error:",e),i}},m=e=>e.toISOString().split("T")[0],y=e=>["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][e.getDay()],j=e=>["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"][e.getMonth()],v=(e,t)=>{try{let i=localStorage.getItem(e);return i?JSON.parse(i):t}catch(e){return t}},D=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Save error:",e)}},k=()=>({habits:{breakfast:!1,fasting:!1,lunch:!1,snack:!1,dinner:!1,plannedTreat:!1},sleep:7,nap:0,energy:3,movement:{workout:!1,walk:!1,run:!1},ecarts:{petit:0,moyen:0,gros:0},customMeals:[],water:0,supplements:{vitaminD:!1,omega3:!1,magnesium:!1,protein:!1,creatine:!1,multivitamin:!1},gratitudes:["","",""],fastingTimer:{start:null,end:null,goal:16}}),S=()=>({poids:75,taille:175,age:30,sexe:"homme",activite:"modere",objectifPoids:70}),C=e=>e?(e.petit||0)+(e.moyen||0)+(e.gros||0):0,z=e=>e?300*(e.petit||0)+600*(e.moyen||0)+1e3*(e.gros||0):0,w=e=>e&&Array.isArray(e)?e.slice(0,4).reduce((e,t)=>e+(t.kcal||0),0):0,M=e=>e&&Array.isArray(e)?e.slice(0,4).reduce((e,t)=>t.isHealthy?e+(t.kcal<500?15:10):e,0):0,R=e=>e?Object.values(e).filter(Boolean).length:0,T=e=>{var t;if(!e)return 0;let i=0;return e.habits&&(e.habits.breakfast&&(i+=20),e.habits.lunch&&(i+=20),e.habits.snack&&(i+=20),e.habits.dinner&&(i+=20),e.habits.plannedTreat&&(i+=20)),e.fastingMorning&&(i+=20),(null===(t=e.fasting)||void 0===t?void 0:t.points)&&(i+=e.fasting.points),i+=M(e.customMeals),e.sleep>=6.5&&(i+=10),(e.water||0)>=8&&(i+=10),e.movement&&(e.movement.workout&&(i+=5),e.movement.walk&&(i+=5),e.movement.run&&(i+=5)),R(e.supplements)>=3&&(i+=5),(e.gratitudes||[]).filter(e=>e&&e.trim()).length>=3&&(i+=5),Math.max(0,i-=10*C(e.ecarts))},B=e=>{if(!e)return 1800;let t=e.poids||75,i=e.taille||175,n=e.age||30;return"homme"===e.sexe?Math.round(10*t+6.25*i-5*n+5):Math.round(10*t+6.25*i-5*n-161)},W=(e,t)=>Math.round(e*(({sedentaire:1.2,leger:1.375,modere:1.55,actif:1.725,intense:1.9})[t]||1.55)),A=[{id:"first_day",emoji:"\uD83C\uDF31",name:"Premier pas",desc:"1er jour compl\xe9t\xe9",check:e=>e.totalDays>=1},{id:"week_streak",emoji:"\uD83D\uDD25",name:"Semaine de feu",desc:"7 jours streak",check:e=>e.streak>=7},{id:"month_streak",emoji:"⚡",name:"Inarr\xeatable",desc:"30 jours streak",check:e=>e.streak>=30},{id:"first_kg",emoji:"\uD83D\uDCC9",name:"Premier kilo",desc:"1kg perdu",check:e=>e.weightLoss>=1},{id:"five_kg",emoji:"\uD83C\uDFC6",name:"Champion",desc:"5kg perdus",check:e=>e.weightLoss>=5},{id:"ten_kg",emoji:"\uD83D\uDC51",name:"L\xe9gende",desc:"10kg perdus",check:e=>e.weightLoss>=10},{id:"hydration_master",emoji:"\uD83D\uDCA7",name:"Hydrat\xe9",desc:"7 jours \xe0 8 verres",check:e=>e.hydrationStreak>=7},{id:"supplement_pro",emoji:"\uD83D\uDC8A",name:"Compl\xe9t\xe9",desc:"7 jours de suppl\xe9ments",check:e=>e.supplementStreak>=7},{id:"gratitude_zen",emoji:"\uD83D\uDE4F",name:"Zen Master",desc:"7 jours de gratitude",check:e=>e.gratitudeStreak>=7},{id:"perfect_score",emoji:"\uD83D\uDCAF",name:"Perfectionniste",desc:"Score de 100",check:e=>e.maxScore>=100},{id:"fifty_days",emoji:"\uD83C\uDFAF",name:"D\xe9termin\xe9",desc:"50 jours suivis",check:e=>e.totalDays>=50},{id:"hundred_days",emoji:"\uD83C\uDF1F",name:"Centurion",desc:"100 jours suivis",check:e=>e.totalDays>=100}],F={breakfast:{title:"Petit-d\xe9j",time:"Matin",emoji:"\uD83C\uDF73",colors:["#f97316","#f59e0b"],points:20,kcal:450,items:["6 oeufs","Caf\xe9","Eau + sel"]},fasting:{title:"Je\xfbne",time:"Matin",emoji:"⏱️",colors:["#06b6d4","#0891b2"],points:20,kcal:0,items:["Je\xfbne intermittent","Eau/Caf\xe9 noir"]},lunch:{title:"D\xe9jeuner",time:"Midi",emoji:"\uD83E\uDD57",colors:["#10b981","#14b8a6"],points:20,kcal:850,items:["250g riz","300g prot\xe9ine","L\xe9gumes"]},snack:{title:"Collation",time:"Pr\xe9-sieste",emoji:"\uD83E\uDD5C",colors:["#8b5cf6","#a855f7"],points:20,kcal:200,items:["Yaourt grec","ou oeuf + amandes"]},dinner:{title:"D\xeener",time:"< 20h30",emoji:"\uD83C\uDF72",colors:["#3b82f6","#6366f1"],points:20,kcal:850,items:["250g riz","300g prot\xe9ine","L\xe9gumes"]},plannedTreat:{title:"Craquage",time:"21h-22h",emoji:"\uD83C\uDF6B",colors:["#ec4899","#f43f5e"],points:20,kcal:300,items:["Autoris\xe9","Z\xe9ro culpabilit\xe9"]}},I=[{id:"vitaminD",emoji:"☀️",name:"Vit D"},{id:"omega3",emoji:"\uD83D\uDC1F",name:"Om\xe9ga 3"},{id:"magnesium",emoji:"\uD83E\uDDF2",name:"Magn\xe9sium"},{id:"protein",emoji:"\uD83D\uDCAA",name:"Prot\xe9ine"},{id:"creatine",emoji:"⚡",name:"Cr\xe9atine"},{id:"multivitamin",emoji:"\uD83D\uDC8A",name:"Multi-vit"}],E=[{id:"petit",emoji:"\uD83C\uDF6A",label:"Petit",kcal:300,color:"#f59e0b"},{id:"moyen",emoji:"\uD83C\uDF54",label:"Moyen",kcal:600,color:"#f97316"},{id:"gros",emoji:"\uD83C\uDF55",label:"Gros",kcal:1e3,color:"#ef4444"}];function H(){let[e,t]=(0,r.useState)("login"),[i,o]=(0,r.useState)(""),[l,s]=(0,r.useState)(""),[d,a]=(0,r.useState)(!1),[c,h]=(0,r.useState)(""),[x,b]=(0,r.useState)(""),f=async n=>{n.preventDefault(),h(""),b(""),a(!0);try{if("reset"===e){let e=await p(i);e.success?(b("Email envoy\xe9 ! V\xe9rifie ta bo\xeete mail."),t("login")):h(e.error),a(!1);return}let n="login"===e?await g(i,l):await u(i,l);n.success||(h(n.error),a(!1)),setTimeout(()=>a(!1),5e3)}catch(e){h("Une erreur est survenue"),a(!1)}};return(0,n.jsx)("div",{style:{minHeight:"100dvh",background:"#0f172a",color:"white",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",display:"flex",alignItems:"center",justifyContent:"center",padding:20},children:(0,n.jsxs)("div",{style:{maxWidth:360,width:"100%"},children:[(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:32},children:[(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:20,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px"},children:(0,n.jsx)("span",{style:{fontSize:40},children:"\uD83C\uDF3F"})}),(0,n.jsx)("h1",{style:{fontSize:28,fontWeight:"bold",margin:0,background:"linear-gradient(to right, #c4b5fd, #f9a8d4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Coach Zen"}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.5)",marginTop:8},children:"Ton coach nutrition personnel"})]}),(0,n.jsxs)("form",{onSubmit:f,children:[(0,n.jsx)("input",{type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"Email",required:!0,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,marginBottom:12,boxSizing:"border-box"}}),"reset"!==e&&(0,n.jsx)("input",{type:"password",value:l,onChange:e=>s(e.target.value),placeholder:"Mot de passe (min 6 car.)",required:!0,minLength:6,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,marginBottom:12,boxSizing:"border-box"}}),c&&(0,n.jsx)("p",{style:{color:"#ef4444",fontSize:14,margin:"0 0 12px",textAlign:"center"},children:c}),x&&(0,n.jsx)("p",{style:{color:"#22c55e",fontSize:14,margin:"0 0 12px",textAlign:"center"},children:x}),(0,n.jsx)("button",{type:"submit",disabled:d,style:{width:"100%",padding:14,borderRadius:10,border:"none",background:d?"rgba(139,92,246,0.5)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontSize:16,fontWeight:"bold",cursor:d?"wait":"pointer",marginBottom:16},children:d?"...":"login"===e?"Se connecter":"signup"===e?"Cr\xe9er mon compte":"Envoyer le lien"})]}),(0,n.jsxs)("div",{style:{textAlign:"center"},children:["login"===e&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{t("reset"),h(""),b("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer",marginBottom:12,display:"block",width:"100%"},children:"Mot de passe oubli\xe9 ?"}),(0,n.jsxs)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:14,margin:0},children:["Pas de compte ? ",(0,n.jsx)("button",{onClick:()=>{t("signup"),h(""),b("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"S'inscrire"})]})]}),"signup"===e&&(0,n.jsxs)("p",{style:{color:"rgba(255,255,255,0.5)",fontSize:14,margin:0},children:["D\xe9j\xe0 un compte ? ",(0,n.jsx)("button",{onClick:()=>{t("login"),h(""),b("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"Se connecter"})]}),"reset"===e&&(0,n.jsx)("button",{onClick:()=>{t("login"),h(""),b("")},style:{background:"none",border:"none",color:"#a78bfa",fontSize:14,cursor:"pointer"},children:"← Retour"})]})]})})}function P(){var e,t,i,o,l,s,d,a,c,g,u,p,P,O,N,J,L,_,V,U,Y,q,Z,G,K,X,Q,$,ee,et,ei,en,er,eo,el,es,ed,ea;let[ec,eg]=(0,r.useState)(null),[eu,ep]=(0,r.useState)(!0),[eh,ex]=(0,r.useState)(!1),[eb,ef]=(0,r.useState)(!1),[em,ey]=(0,r.useState)(""),[ej,ev]=(0,r.useState)({}),[eD,ek]=(0,r.useState)("today"),[eS,eC]=(0,r.useState)(k()),[ez,ew]=(0,r.useState)(null),[eM,eR]=(0,r.useState)(S()),[eT,eB]=(0,r.useState)(!1),[eW,eA]=(0,r.useState)(""),[eF,eI]=(0,r.useState)(!1),[eE,eH]=(0,r.useState)("week"),[eP,eO]=(0,r.useState)([]),[eN,eJ]=(0,r.useState)(!1),[eL,e_]=(0,r.useState)(75),[eV,eU]=(0,r.useState)(!1),[eY,eq]=(0,r.useState)(""),[eZ,eG]=(0,r.useState)(!1),[eK,eX]=(0,r.useState)(null),[eQ,e$]=(0,r.useState)(null),[e0,e1]=(0,r.useState)(null),[e2,e5]=(0,r.useState)(!1),[e4,e8]=(0,r.useState)([]),[e3,e6]=(0,r.useState)(""),[e9,e7]=(0,r.useState)(!1),[te,tt]=(0,r.useState)(!1),[ti,tn]=(0,r.useState)(null),[tr,to]=(0,r.useState)([]),[tl,ts]=(0,r.useState)(!1),[td,ta]=(0,r.useState)(0),[tc,tg]=(0,r.useState)(""),[tu,tp]=(0,r.useState)(!1),[th,tx]=(0,r.useState)(!0),[tb,tf]=(0,r.useState)(!1),[tm,ty]=(0,r.useState)(!1),[tj,tv]=(0,r.useState)([]),[tD,tk]=(0,r.useState)(""),[tS,tC]=(0,r.useState)(!1),[tz,tw]=(0,r.useState)(!1),[tM,tR]=(0,r.useState)(""),[tT,tB]=(0,r.useState)(null),tW=(0,r.useRef)(null),tA=(0,r.useRef)(null);(0,r.useEffect)(()=>{tx(v("cz_darkMode",!0))},[]);let tF=th?{bg:"#0f172a",card:"rgba(255,255,255,0.05)",cardBorder:"rgba(255,255,255,0.1)",cardShadow:"none",text:"#ffffff",textMuted:"rgba(255,255,255,0.6)",textFaint:"rgba(255,255,255,0.4)",textVeryFaint:"rgba(255,255,255,0.3)",inputBg:"rgba(255,255,255,0.1)",buttonBg:"rgba(255,255,255,0.1)",buttonBgHover:"rgba(255,255,255,0.15)",navBg:"rgba(15,23,42,0.98)",modalBg:"#1e293b",overlayBg:"rgba(0,0,0,0.85)",progressBg:"rgba(255,255,255,0.1)",mealCardBg:"rgba(15,23,42,0.95)",mealCardBgActive:"rgba(255,255,255,0.15)"}:{bg:"#f1f5f9",card:"#ffffff",cardBorder:"#e2e8f0",cardShadow:"0 1px 3px rgba(0,0,0,0.1)",text:"#1e293b",textMuted:"#64748b",textFaint:"#94a3b8",textVeryFaint:"#cbd5e1",inputBg:"#f1f5f9",buttonBg:"rgba(0,0,0,0.05)",buttonBgHover:"rgba(0,0,0,0.1)",navBg:"rgba(255,255,255,0.98)",modalBg:"#ffffff",overlayBg:"rgba(0,0,0,0.5)",progressBg:"#e2e8f0",mealCardBg:"#ffffff",mealCardBgActive:"rgba(139,92,246,0.1)"},tI=(0,r.useMemo)(()=>m(new Date),[]);(0,r.useEffect)(()=>{var e;let t=null==eS?void 0:null===(e=eS.fastingTimer)||void 0===e?void 0:e.start;if(!t){ta(0);return}let i=()=>{ta(Math.floor((Date.now()-t)/1e3))};i();let n=setInterval(i,1e3);return()=>clearInterval(n)},[null==eS?void 0:null===(e=eS.fastingTimer)||void 0===e?void 0:e.start]);let tE=em===tI,tH=(0,r.useCallback)(async()=>{if(eS&&tE){tp(!0);try{let e=await fetch("/api/coach/daily-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score:T(eS),habits:eS.habits,sleep:eS.sleep,nap:eS.nap,energy:eS.energy,water:eS.water,ecarts:eS.ecarts,movement:eS.movement,customMeals:eS.customMeals,fasting:eS.fasting,fastingMorning:eS.fastingMorning})}),t=await e.json();tg(t.analysis||"")}catch(e){console.error("Daily analysis error:",e)}finally{tp(!1)}}},[eS,tE]);(0,r.useEffect)(()=>{if(eh&&tE)return tA.current&&clearTimeout(tA.current),tA.current=setTimeout(()=>{tH()},2e3),()=>{tA.current&&clearTimeout(tA.current)}},[null==eS?void 0:eS.habits,null==eS?void 0:eS.sleep,null==eS?void 0:eS.water,null==eS?void 0:eS.ecarts,null==eS?void 0:eS.movement,null==eS?void 0:eS.customMeals,eh,tE,tH]),(0,r.useEffect)(()=>{let e=!0,t=x(t=>{e&&(eg(t),ep(!1))}),i=setTimeout(()=>{e&&ep(!1)},3e3);return()=>{e=!1,clearTimeout(i),t()}},[]);let tP=(0,r.useMemo)(()=>{var e,t,i,n,r;let o=[...eP].sort((e,t)=>new Date(e.date)-new Date(t.date)),l=(null===(e=o[0])||void 0===e?void 0:e.weight)||eM.poids,s=(null===(t=o[o.length-1])||void 0===t?void 0:t.weight)||eM.poids,d=0;for(let e=0;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),(null==ej?void 0:ej[m(t)])&&T(ej[m(t)])>=50)d++;else break}let a=0;for(let e=0;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),(null==ej?void 0:null===(i=ej[m(t)])||void 0===i?void 0:i.water)>=8)a++;else break}let c=0;for(let e=0;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),R(null==ej?void 0:null===(n=ej[m(t)])||void 0===n?void 0:n.supplements)>=3)c++;else break}let g=0;for(let e=0;e<=365;e++){let t=new Date;if(t.setDate(t.getDate()-e),((null==ej?void 0:null===(r=ej[m(t)])||void 0===r?void 0:r.gratitudes)||[]).filter(e=>e&&e.trim()).length>=3)g++;else break}let u=Object.values(ej||{}).map(e=>T(e));return{totalDays:Object.keys(ej||{}).length,streak:d,weightLoss:l-s,hydrationStreak:a,supplementStreak:c,gratitudeStreak:g,maxScore:u.length?Math.max(...u):0}},[ej,eP,eM.poids]);(0,r.useEffect)(()=>{if(!eh)return;let e=A.filter(e=>e.check(tP)).map(e=>e.id),t=v("cz_badges",[]),i=e.filter(e=>!t.includes(e));i.length>0&&(tn(A.find(e=>e.id===i[0])),setTimeout(()=>tn(null),3e3)),to(e),D("cz_badges",e)},[tP,eh]),(0,r.useEffect)(()=>{ec&&(async()=>{let e=m(new Date);ey(e);try{ef(!0);let[t,i,n]=await Promise.all([f(ec.uid,"allData",{}),f(ec.uid,"profile",S()),f(ec.uid,"weightHistory",[])]);ev(t||{}),eR(i||S()),eO(Array.isArray(n)?n:[]),eC(t&&t[e]?t[e]:k()),ef(!1)}catch(e){console.error("Firebase load error:",e),ef(!1)}ex(!0),fetch("/api/coach/message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({energy:3,score:0,slot:"morning"})}).then(e=>e.json()).then(e=>ew(e.message||"Le plan commence.")).catch(()=>ew("Le plan commence."))})()},[ec]),(0,r.useEffect)(()=>{eh&&em&&eC(ej[em]||k())},[em,eh,ej]),(0,r.useEffect)(()=>{if(!eh||!em||!ec)return;let e=setTimeout(()=>{let e={...ej,[em]:eS};ev(e),b(ec.uid,"allData",e)},500);return()=>clearTimeout(e)},[eS,eh,em,ec]),(0,r.useEffect)(()=>{eh&&ec&&b(ec.uid,"profile",eM)},[eM,eh,ec]),(0,r.useEffect)(()=>{eh&&ec&&b(ec.uid,"weightHistory",eP)},[eP,eh,ec]);let tO=async()=>{await h(),ev({}),eR(S()),eO([]),ex(!1)},tN=(0,r.useCallback)(e=>{let t=m(new Date);eO(i=>[...i.filter(e=>e.date!==t),{date:t,weight:Number(e)}]),eR(t=>({...t,poids:Number(e)})),eJ(!1)},[]),tJ=(0,r.useCallback)(e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!i)return;let n=new FileReader;n.onloadend=()=>e$(n.result),n.readAsDataURL(i)},[]),tL=(0,r.useCallback)(async()=>{if(eY.trim()||eQ){eG(!0),eX(null);try{let e=await fetch("/api/coach/food",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:eY,image:eQ})}),t=await e.json();eX(t)}catch(e){eX({success:!1,error:"Erreur"})}eG(!1)}},[eY,eQ]),t_=(0,r.useCallback)(()=>{eK&&eK.success&&(eC(e=>({...e,customMeals:[...e.customMeals||[],{id:Date.now(),name:eK.name,kcal:eK.kcal,points:eK.isHealthy?eK.kcal<500?15:10:0,isHealthy:eK.isHealthy,details:eK.details,mealType:e0}],habits:{...e.habits||{},[e0]:!1},..."breakfast"===e0?{fastingMorning:!1}:{}})),eU(!1),eq(""),eX(null),e$(null),e1(null))},[eK,e0]),tV=(0,r.useCallback)(e=>eC(t=>({...t,customMeals:(t.customMeals||[]).filter(t=>t.id!==e)})),[]),tU=(0,r.useCallback)(async e=>{eI(!0),eH(e);try{let t=await fetch("/api/coach/analyze",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({allData:ej,profile:eM,period:e,weightHistory:eP,stats:tP})}),i=await t.json();eA(i.analysis||"Analyse indisponible.")}catch(e){eA("Erreur.")}eI(!1)},[ej,eM,eP,tP]),tY=(0,r.useCallback)(async e=>{tk(e),tf(!0),ty(!0),tv([]);try{let t=await fetch("/api/recipes/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mealType:e})}),i=await t.json();tv(i.recipes||[])}catch(e){console.error("Recipe fetch error:",e),tv([])}ty(!1)},[]),tq=(0,r.useCallback)(async()=>{tC(!0),tw(!0),tR(""),tB(null);let e={};for(let t=0;t<7;t++){let i=new Date;i.setDate(i.getDate()-t);let n=m(i);ej[n]&&(e[n]=ej[n])}try{let t=await fetch("/api/coach/weekly-report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({weekData:e,profile:eM,weightHistory:eP})}),i=await t.json();tR(i.report||""),tB(i.stats||null)}catch(e){console.error("Weekly report error:",e),tR("Impossible de g\xe9n\xe9rer le rapport.")}tw(!1)},[ej,eM,eP]),tZ=(0,r.useCallback)(async e=>{if(!e.trim())return;let t={role:"user",content:e};e8(e=>[...e,t]),e6(""),e7(!0);try{let t=await fetch("/api/coach/voice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,allData:ej,profile:eM,weightHistory:eP,stats:tP,todayData:eS,history:e4.slice(-10)})}),i=await t.json();if(e8(e=>[...e,{role:"assistant",content:i.response}]),"speechSynthesis"in window){let e=new SpeechSynthesisUtterance(i.response);e.lang="fr-FR",speechSynthesis.speak(e)}}catch(e){e8(e=>[...e,{role:"assistant",content:"D\xe9sol\xe9, je n'ai pas pu r\xe9pondre."}])}e7(!1)},[ej,eM,eP,e4,tP,eS]),tG=(0,r.useCallback)(()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Reconnaissance vocale non support\xe9e.");return}let e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang="fr-FR",e.onstart=()=>tt(!0),e.onend=()=>tt(!1),e.onresult=e=>tZ(e.results[0][0].transcript),e.onerror=()=>tt(!1),e.start()},[tZ]),tK=T(eS),tX=(0,r.useMemo)(()=>Object.entries(F).reduce((e,t)=>{var i;let[n,r]=t;return(null==eS?void 0:null===(i=eS.habits)||void 0===i?void 0:i[n])?e+r.kcal:e},0),[null==eS?void 0:eS.habits]),tQ=(0,r.useMemo)(()=>Object.entries(F).filter(e=>{let[t]=e;return"fasting"!==t}).reduce((e,t)=>{let[i,n]=t;return e+n.kcal},0),[]),t$=tX+w(eS.customMeals)+z(eS.ecarts),t0=B(eM),t1=W(t0,null==eM?void 0:eM.activite),t2=(0,r.useMemo)(()=>{if(!eP.length||!eM.objectifPoids)return null;let e=[...eP].sort((e,t)=>new Date(e.date)-new Date(t.date));if(e.length<2)return null;let t=e.slice(-14),i=t[0],n=t[t.length-1],r=(new Date(n.date)-new Date(i.date))/864e5;if(r<7||0===r)return null;let o=(i.weight-n.weight)/r;if(o<=.001)return{message:"Phase de maintien",date:null};let l=n.weight-eM.objectifPoids;if(l<=0)return{message:"\uD83C\uDF89 Objectif atteint !",date:null};let s=Math.ceil(l/o);if(s>1095)return{message:"Objectif lointain",date:null};let d=new Date;return d.setDate(d.getDate()+s),{message:"".concat((7*o).toFixed(1)," kg/sem"),date:d}},[eP,eM.objectifPoids]),t5=(0,r.useCallback)((e,t)=>{eC(i=>{let n={...i.habits||{},[e]:t};return"breakfast"===e&&t&&(n.fasting=!1),"fasting"===e&&t&&(n.breakfast=!1),{...i,habits:n}})},[]),t4=(0,r.useCallback)((e,t)=>eC(i=>({...i,movement:{...i.movement||{},[e]:t}})),[]),t8=(0,r.useCallback)((e,t)=>eC(i=>({...i,supplements:{...i.supplements||{},[e]:t}})),[]),t3=(0,r.useCallback)((e,t)=>eC(i=>{let n=[...i.gratitudes||["","",""]];return n[e]=t,{...i,gratitudes:n}}),[]),t6=tP.streak,t9=(0,r.useMemo)(()=>{let e=[];for(let t=13;t>=0;t--){let i=new Date;i.setDate(i.getDate()-t),e.push(i)}return e},[]),t7=(0,r.useMemo)(()=>{let e=Object.values(ej||{}).slice(-30).map(e=>T(e)).filter(e=>e>0);return e.length?Math.round(e.reduce((e,t)=>e+t,0)/e.length):0},[ej]),ie=tP.totalDays,it=(0,r.useMemo)(()=>{let e=new Date,t=e.getDay(),i=new Date(e);i.setDate(e.getDate()-(0===t?6:t-1)),i.setHours(0,0,0,0);let n=0;for(let t=0;t<7;t++){let r=new Date(i);if(r.setDate(i.getDate()+t),r>e)break;let o=m(r);(null==ej?void 0:ej[o])&&(n+=T(ej[o]))}return n},[ej]),ii=(0,r.useMemo)(()=>{let e=new Date,t=e.getFullYear(),i=e.getMonth(),n=0;return Object.entries(ej||{}).forEach(e=>{let[r,o]=e,l=new Date(r);l.getFullYear()===t&&l.getMonth()===i&&(n+=T(o))}),n},[ej]),ir=(0,r.useMemo)(()=>em?new Date(em+"T12:00:00"):new Date,[em]),io=(0,r.useMemo)(()=>{let e=[...eP].sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(-30);if(!e.length)return[];let t=Math.min(...e.map(e=>e.weight))-2,i=Math.max(...e.map(e=>e.weight))+2;return e.map(e=>({...e,percent:(e.weight-t)/(i-t)*100}))},[eP]),il=(0,r.useMemo)(()=>{let e=Object.entries(ej||{}).sort((e,t)=>t[0].localeCompare(e[0])),t=[];for(let e=6;e>=0;e--){let i=new Date;i.setDate(i.getDate()-e);let n=m(i),r=null==ej?void 0:ej[n];t.push({label:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][i.getDay()],score:r?T(r):0})}let i=t.map(e=>e.score).filter(e=>e>0),n=i.length?Math.round(i.reduce((e,t)=>e+t,0)/i.length):0,r=e.map(e=>{let[t,i]=e;return T(i)}),o=r.length?Math.round(r.filter(e=>e>=80).length/r.length*100):0,l=[...eP].sort((e,t)=>new Date(e.date)-new Date(t.date)),s=l.length>=2?Number((l[l.length-1].weight-l[0].weight).toFixed(1)):0,d={breakfast:"Petit-d\xe9j",lunch:"D\xe9jeuner",snack:"Collation",dinner:"D\xeener",plannedTreat:"Plaisir planifi\xe9"},a={breakfast:"\uD83C\uDF73",lunch:"\uD83E\uDD57",snack:"\uD83E\uDD5C",dinner:"\uD83C\uDF72",plannedTreat:"\uD83C\uDF6B"},c=["breakfast","lunch","snack","dinner","plannedTreat"].map(t=>{let i=e.filter(e=>{let[t,i]=e;return i.habits}).length,n=e.filter(e=>{var i;let[n,r]=e;return null===(i=r.habits)||void 0===i?void 0:i[t]}).length;return{name:d[t],emoji:a[t],rate:i?Math.round(n/i*100):0}}),g=r.length?Math.max(...r):0,u=l.length?Math.min(...l.map(e=>e.weight)):null,p=0,h=0;for(let e of Object.keys(ej||{}).sort())T(ej[e])>=50?p=Math.max(p,++h):h=0;return{last7Days:t,avgScore:n,successRate:o,weightChange:s,habitRates:c,bestScore:g,longestStreak:p,lowestWeight:u}},[ej,eP]),is={minHeight:"100dvh",background:tF.bg,color:tF.text,fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",paddingBottom:90,transition:"background 0.3s, color 0.3s"},id={maxWidth:500,margin:"0 auto",padding:"12px 16px 20px",overflowX:"hidden"},ia={background:tF.card,borderRadius:16,padding:14,marginBottom:12,border:"1px solid ".concat(tF.cardBorder),boxShadow:tF.cardShadow,transition:"background 0.3s, border 0.3s, box-shadow 0.3s"};return eu?(0,n.jsx)("div",{style:is,children:(0,n.jsx)("div",{style:id,children:(0,n.jsx)("p",{style:{textAlign:"center",paddingTop:100},children:"Chargement..."})})}):ec?eh?(0,n.jsxs)("div",{style:is,children:[(0,n.jsxs)("div",{style:id,children:[(0,n.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12,paddingTop:8},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("div",{style:{width:32,height:32,borderRadius:10,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:16},children:"\uD83C\uDF3F"})}),(0,n.jsx)("span",{style:{fontSize:18,fontWeight:"bold",background:"linear-gradient(to right, #c4b5fd, #f9a8d4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Coach Zen"}),eb&&(0,n.jsx)("span",{style:{fontSize:10,color:"#22c55e"},children:"☁️"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsx)("button",{onClick:()=>{tx(e=>(D("cz_darkMode",!e),!e))},style:{background:th?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:14},children:th?"☀️":"\uD83C\uDF19"})}),(0,n.jsxs)("button",{onClick:()=>ts(!0),style:{background:th?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer",position:"relative"},children:[(0,n.jsx)("span",{style:{fontSize:14},children:"\uD83C\uDFC6"}),tr.length>0&&(0,n.jsx)("span",{style:{position:"absolute",top:-4,right:-4,background:"#22c55e",color:"white",fontSize:10,width:16,height:16,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:tr.length})]}),(0,n.jsx)("button",{onClick:()=>e5(!0),style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:14},children:"\uD83C\uDF99️"})}),(0,n.jsx)("button",{onClick:tq,style:{background:"linear-gradient(135deg, #f97316, #f59e0b)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:14},children:"\uD83D\uDCCA"})}),(0,n.jsx)("button",{onClick:()=>{eB(!0),tU("week")},style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)",border:"none",borderRadius:10,padding:"8px 12px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold"},children:"\uD83E\uDD16"})})]})]}),"today"===eD&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{textAlign:"center",marginBottom:12},children:[!tE&&(0,n.jsx)("button",{onClick:()=>ey(tI),style:{background:"rgba(139,92,246,0.2)",border:"1px solid rgba(139,92,246,0.3)",borderRadius:8,padding:"6px 14px",marginBottom:8,cursor:"pointer"},children:(0,n.jsx)("span",{style:{color:"#a78bfa",fontSize:12},children:"← Retour \xe0 aujourd'hui"})}),(0,n.jsx)("p",{style:{color:tE?tF.textFaint:"#f59e0b",fontSize:12,margin:0},children:tE?y(ir):"⚠️ \xc9dition"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16},children:[(0,n.jsx)("button",{onClick:()=>{let e=new Date(em);e.setDate(e.getDate()-1),ey(m(e))},style:{background:tF.buttonBg,border:"none",borderRadius:8,width:36,height:36,cursor:"pointer",color:tF.text,fontSize:18},children:"←"}),(0,n.jsxs)("h1",{style:{fontSize:26,fontWeight:"bold",margin:0,color:tF.text},children:[ir.getDate()," ",j(ir)]}),(0,n.jsx)("button",{onClick:()=>{let e=new Date(em);e.setDate(e.getDate()+1),e<=new Date&&ey(m(e))},style:{background:tF.buttonBg,border:"none",borderRadius:8,width:36,height:36,cursor:"pointer",color:tF.text,fontSize:18,opacity:tE?.3:1},disabled:tE,children:"→"})]})]}),tE&&ez&&(0,n.jsx)("div",{style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)",padding:2,borderRadius:16,marginBottom:12},children:(0,n.jsx)("div",{style:{background:th?"rgba(15,23,42,0.95)":"rgba(255,255,255,0.95)",borderRadius:14,padding:12},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("div",{style:{width:32,height:32,borderRadius:10,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,n.jsx)("span",{style:{fontWeight:"bold",fontSize:14,color:"white"},children:"Z"})}),(0,n.jsx)("p",{style:{flex:1,fontSize:14,margin:0,lineHeight:1.5,color:tF.text},children:ez}),(0,n.jsx)("button",{onClick:()=>ew(null),style:{background:"none",border:"none",color:tF.textFaint,cursor:"pointer",fontSize:18,padding:0},children:"\xd7"})]})})}),(0,n.jsxs)("div",{style:{...ia,display:"flex",alignItems:"center",justifyContent:"space-between",padding:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:16,fontWeight:"bold",margin:0,color:tF.text},children:"Score du jour"}),(0,n.jsx)("p",{style:{color:tF.textMuted,fontSize:14,margin:"4px 0"},children:tK>=100?"✨ Journ\xe9e parfaite!":tK>=80?"\uD83D\uDD25 On fire!":tK>=50?"\uD83D\uDCAA Solide":"\uD83C\uDF31 En route"})]}),(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:40,border:"6px solid ".concat(tK>=100?"#fbbf24":tK>=80?"#22c55e":tK>=50?"#8b5cf6":"#f59e0b"),display:"flex",alignItems:"center",justifyContent:"center",background:tK>=100?"rgba(251,191,36,0.15)":"transparent",boxShadow:tK>=100?"0 0 20px rgba(251,191,36,0.5), 0 0 40px rgba(251,191,36,0.2)":"none"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:26,fontWeight:"bold",color:tK>=100?"#fbbf24":tK>=80?"#22c55e":tK>=50?"#8b5cf6":"#f59e0b"},children:tK}),(0,n.jsx)("p",{style:{fontSize:10,margin:0,color:tF.textMuted},children:"pts"})]})})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10,marginBottom:12},children:[(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.15), rgba(168,85,247,0.15))",borderRadius:14,padding:14,border:"1px solid rgba(139,92,246,0.2)"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"\uD83D\uDCC5 Cette semaine"}),(0,n.jsxs)("p",{style:{fontSize:24,fontWeight:"bold",margin:"4px 0 0",color:"#8b5cf6"},children:[it," ",(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"normal"},children:"pts"})]})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(6,182,212,0.15), rgba(14,165,233,0.15))",borderRadius:14,padding:14,border:"1px solid rgba(6,182,212,0.2)"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"\uD83D\uDDD3️ Ce mois"}),(0,n.jsxs)("p",{style:{fontSize:24,fontWeight:"bold",margin:"4px 0 0",color:"#06b6d4"},children:[ii," ",(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"normal"},children:"pts"})]})]})]}),(0,n.jsxs)("div",{style:{...ia,marginBottom:12},children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 8px"},children:"\uD83D\uDCB0 D\xe9tail des points"}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:(()=>{var e,t,i,r;let o=20*["breakfast","lunch","snack","dinner","plannedTreat"].filter(e=>{var t;return null==eS?void 0:null===(t=eS.habits)||void 0===t?void 0:t[e]}).length,l=eS.fastingMorning?20:0,s=M(eS.customMeals),d=(null===(e=eS.fasting)||void 0===e?void 0:e.points)||0,a=eS.sleep>=6.5?10:0,c=(eS.water||0)>=8?10:0,g=((null===(t=eS.movement)||void 0===t?void 0:t.workout)?5:0)+((null===(i=eS.movement)||void 0===i?void 0:i.walk)?5:0)+((null===(r=eS.movement)||void 0===r?void 0:r.run)?5:0),u=R(eS.supplements)>=3?5:0,p=(eS.gratitudes||[]).filter(e=>e&&e.trim()).length>=3?5:0,h=10*C(eS.ecarts);return(0,n.jsxs)(n.Fragment,{children:[o>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83C\uDF7D️ Repas: +",o]}),l>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83D\uDEAB\uD83C\uDF7D️ Je\xfbne matin: +",l]}),s>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83E\uDD57 Libres: +",s]}),d>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["⏱️ Je\xfbne: +",d]}),a>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83C\uDF19 Sommeil: +",a]}),c>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83D\uDCA7 Eau: +",c]}),g>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83C\uDFC3 Sport: +",g]}),u>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83D\uDC8A Suppl: +",u]}),p>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:tF.text,background:tF.inputBg,padding:"4px 8px",borderRadius:6},children:["\uD83D\uDE4F Grat: +",p]}),h>0&&(0,n.jsxs)("span",{style:{fontSize:11,color:"#ef4444",background:"rgba(239,68,68,0.1)",padding:"4px 8px",borderRadius:6},children:["\uD83C\uDF54 \xc9carts: -",h]}),0===tK&&(0,n.jsx)("span",{style:{fontSize:11,color:tF.textMuted},children:"Aucun point encore"})]})})()})]}),tE&&(tc||tu)&&(0,n.jsx)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(139,92,246,0.15), rgba(59,130,246,0.15))",border:"1px solid rgba(139,92,246,0.3)"},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,n.jsx)("span",{style:{fontSize:20},children:"\uD83D\uDCAC"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("p",{style:{fontSize:12,color:tF.textMuted,margin:"0 0 4px"},children:"Analyse du jour"}),(0,n.jsx)("p",{style:{fontSize:14,margin:0,lineHeight:1.5,color:tF.text},children:tu?"...":tc})]})]})}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,n.jsx)("span",{style:{fontSize:14,color:tF.textMuted},children:"\uD83D\uDD25 Calories"}),(0,n.jsxs)("span",{style:{fontSize:16,fontWeight:"bold",color:t$>t1?"#ef4444":"#10b981"},children:[t$," / ",t1]})]}),(0,n.jsx)("div",{style:{height:8,background:tF.progressBg,borderRadius:4,overflow:"hidden"},children:(0,n.jsx)("div",{style:{height:"100%",background:t$>t1?"#ef4444":"#10b981",width:"".concat(Math.min(t$/t1*100,100),"%")}})}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textFaint,margin:"8px 0 0",textAlign:"center"},children:t1-t$>0?"\uD83D\uDCC9 D\xe9ficit: −".concat(t1-t$," kcal"):"\uD83D\uDCC8 Surplus: +".concat(Math.abs(t1-t$)," kcal")})]}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(6,182,212,0.1), rgba(8,145,178,0.1))",border:"1px solid rgba(6,182,212,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:"\uD83D\uDCA7 Hydratation"}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"+10 pts si ≥ 8"})]}),(0,n.jsxs)("span",{style:{fontSize:18,fontWeight:"bold",color:(eS.water||0)>=8?"#22c55e":tF.text},children:[eS.water||0,"/8"]})]}),(0,n.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[...Array(8)].map((e,t)=>(0,n.jsx)("button",{onClick:()=>eC(e=>({...e,water:t+1})),style:{width:36,height:36,borderRadius:8,border:"none",cursor:"pointer",background:t<(eS.water||0)?"#06b6d4":tF.buttonBg},children:(0,n.jsx)("span",{style:{fontSize:16,color:t<(eS.water||0)?"white":tF.textMuted},children:t<(eS.water||0)?"\uD83D\uDCA7":"○"})},t))})]}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(168,85,247,0.1), rgba(139,92,246,0.1))",border:"1px solid rgba(168,85,247,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:"\uD83D\uDC8A Compl\xe9ments"}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"+5 pts si ≥ 3"})]}),(0,n.jsxs)("span",{style:{fontSize:14,fontWeight:"bold",color:R(eS.supplements)>=3?"#22c55e":tF.text},children:[R(eS.supplements),"/6"]})]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:8},children:I.map(e=>{var t,i;return(0,n.jsxs)("button",{onClick:()=>{var t;return t8(e.id,!(null===(t=eS.supplements)||void 0===t?void 0:t[e.id]))},style:{padding:10,borderRadius:10,border:"none",cursor:"pointer",background:(null===(t=eS.supplements)||void 0===t?void 0:t[e.id])?"#8b5cf6":tF.buttonBg,display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[(0,n.jsx)("span",{style:{fontSize:18},children:e.emoji}),(0,n.jsx)("span",{style:{fontSize:10,color:(null===(i=eS.supplements)||void 0===i?void 0:i[e.id])?"white":tF.textMuted},children:e.name})]},e.id)})})]}),(()=>{var e,t,i,r;let o=null===(e=eS.customMeals)||void 0===e?void 0:e.find(e=>"breakfast"===e.mealType);return(0,n.jsx)("div",{style:{...ia,marginBottom:10},children:o?(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:12,background:"linear-gradient(135deg, #f97316, #f59e0b)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:"white"},children:"✓"}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0,color:tF.text},children:o.name}),(0,n.jsx)("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:o.isHealthy?"#22c55e":"#ef4444",color:"white",fontWeight:"bold"},children:o.isHealthy?"HEALTHY":"NOT HEALTHY"})]}),(0,n.jsxs)("p",{style:{fontSize:12,color:tF.textMuted,margin:0},children:["Petit-d\xe9jeuner • ",o.kcal," kcal"]})]}),(0,n.jsx)("span",{style:{fontSize:13,color:o.isHealthy?"#22c55e":"#ef4444",fontWeight:"bold"},children:o.isHealthy?"+".concat(o.kcal<500?15:10):"+0"}),(0,n.jsx)("button",{onClick:()=>tV(o.id),style:{padding:"6px 10px",borderRadius:8,background:"rgba(239,68,68,0.2)",border:"none",cursor:"pointer",color:"#ef4444",fontSize:12},children:"✕"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{style:{fontSize:12,color:tF.textMuted,margin:"0 0 10px",textAlign:"center"},children:"\uD83C\uDF05 Matin : choisis une option (+20 pts)"}),(0,n.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,n.jsxs)("button",{onClick:()=>eC(e=>({...e,habits:{...e.habits,breakfast:!0},fastingMorning:!1})),style:{flex:1,padding:12,borderRadius:12,border:"none",cursor:"pointer",minHeight:80,background:(null==eS?void 0:null===(t=eS.habits)||void 0===t?void 0:t.breakfast)&&!(null==eS?void 0:eS.fastingMorning)?"linear-gradient(135deg, #f97316, #f59e0b)":tF.buttonBg,color:(null==eS?void 0:null===(i=eS.habits)||void 0===i?void 0:i.breakfast)&&!(null==eS?void 0:eS.fastingMorning)?"white":tF.text},children:[(0,n.jsx)("span",{style:{fontSize:20,display:"block"},children:"\uD83C\uDF73"}),(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold"},children:"Petit-d\xe9j"}),(0,n.jsx)("span",{style:{display:"block",fontSize:10,marginTop:2,opacity:(null==eS?void 0:null===(r=eS.habits)||void 0===r?void 0:r.breakfast)&&!(null==eS?void 0:eS.fastingMorning)?1:0},children:"✓ +20 pts"})]}),(0,n.jsxs)("button",{onClick:()=>eC(e=>({...e,habits:{...e.habits,breakfast:!1},fastingMorning:!0})),style:{flex:1,padding:12,borderRadius:12,border:"none",cursor:"pointer",minHeight:80,background:(null==eS?void 0:eS.fastingMorning)?"linear-gradient(135deg, #06b6d4, #0891b2)":tF.buttonBg,color:(null==eS?void 0:eS.fastingMorning)?"white":tF.text},children:[(0,n.jsx)("span",{style:{fontSize:20,display:"block"},children:"\uD83D\uDEAB\uD83C\uDF7D️"}),(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold"},children:"Je je\xfbne"}),(0,n.jsx)("span",{style:{display:"block",fontSize:10,marginTop:2,opacity:(null==eS?void 0:eS.fastingMorning)?1:0},children:"✓ +20 pts"})]}),(0,n.jsx)("button",{onClick:()=>{e1("breakfast"),eU(!0)},style:{width:48,borderRadius:12,border:"none",background:"rgba(34,197,94,0.2)",color:"#22c55e",fontSize:24,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})})})(),(0,n.jsx)("div",{style:{padding:2,borderRadius:14,background:"linear-gradient(135deg, ".concat(F.fasting.colors[0],", ").concat(F.fasting.colors[1],")"),marginBottom:10},children:(0,n.jsx)("div",{style:{background:tF.mealCardBg,borderRadius:12,padding:12},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,n.jsx)("button",{onClick:()=>ek("fasting"),style:{width:44,height:44,borderRadius:12,background:tF.buttonBg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,border:"none",cursor:"pointer",color:(null==eS?void 0:null===(t=eS.fasting)||void 0===t?void 0:t.points)?"#22c55e":tF.text},children:(null==eS?void 0:null===(i=eS.fasting)||void 0===i?void 0:i.points)?"✓":"⏱️"}),(0,n.jsxs)("div",{onClick:()=>ek("fasting"),style:{flex:1,textAlign:"left",cursor:"pointer"},children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:"Je\xfbne Intermittent"}),(0,n.jsx)("p",{style:{fontSize:11,color:(null==eS?void 0:null===(o=eS.fastingTimer)||void 0===o?void 0:o.start)&&!(null==eS?void 0:null===(l=eS.fastingTimer)||void 0===l?void 0:l.end)?"#06b6d4":tF.textMuted,margin:0,fontFamily:(null==eS?void 0:null===(s=eS.fastingTimer)||void 0===s?void 0:s.start)?"monospace":"inherit"},children:(null==eS?void 0:null===(d=eS.fastingTimer)||void 0===d?void 0:d.start)&&!(null==eS?void 0:null===(a=eS.fastingTimer)||void 0===a?void 0:a.end)?"En cours: ".concat(Math.floor(td/3600),"h ").concat(Math.floor(td%3600/60),"m"):(null==eS?void 0:null===(c=eS.fasting)||void 0===c?void 0:c.points)?"✅ Termin\xe9: +".concat(eS.fasting.points," pts"):"Objectif: ".concat((null==eS?void 0:null===(g=eS.fastingTimer)||void 0===g?void 0:g.goal)||16,"h • Tap pour d\xe9marrer")})]}),(null==eS?void 0:null===(u=eS.fasting)||void 0===u?void 0:u.points)&&(0,n.jsxs)("span",{style:{fontSize:14,fontWeight:"bold",color:"#22c55e"},children:["+",eS.fasting.points]})]})})}),Object.entries(F).filter(e=>{let[t]=e;return!["breakfast","fasting"].includes(t)}).map(e=>{var t,i,r,o,l,s;let[d,a]=e,c=null===(t=eS.customMeals)||void 0===t?void 0:t.find(e=>e.mealType===d),g=!!c;return(0,n.jsx)("div",{style:{width:"100%",marginBottom:10},children:(0,n.jsx)("div",{style:{padding:3,borderRadius:18,background:"linear-gradient(135deg, ".concat(a.colors[0],", ").concat(a.colors[1],")")},children:(0,n.jsx)("div",{style:{background:g||(null==eS?void 0:null===(i=eS.habits)||void 0===i?void 0:i[d])?tF.mealCardBgActive:tF.mealCardBg,borderRadius:15,padding:14},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:12,background:tF.buttonBg,display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,color:g||(null==eS?void 0:null===(r=eS.habits)||void 0===r?void 0:r[d])?"#22c55e":tF.text},children:g||(null==eS?void 0:null===(o=eS.habits)||void 0===o?void 0:o[d])?"✓":a.emoji}),(0,n.jsx)("div",{style:{flex:1,textAlign:"left"},children:g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6,flexWrap:"wrap"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0,color:tF.text},children:c.name}),(0,n.jsx)("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:c.isHealthy?"#22c55e":"#ef4444",color:"white",fontWeight:"bold"},children:c.isHealthy?"HEALTHY":"NOT HEALTHY"})]}),(0,n.jsxs)("p",{style:{fontSize:12,color:tF.textMuted,margin:0},children:[a.time," • ",c.kcal," kcal"]})]}):(0,n.jsxs)("div",{onClick:()=>{var e;return t5(d,!(null==eS?void 0:null===(e=eS.habits)||void 0===e?void 0:e[d]))},style:{cursor:"pointer"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0,color:tF.text},children:a.title}),(0,n.jsxs)("p",{style:{fontSize:12,color:tF.textMuted,margin:0},children:[a.time," • ",a.kcal," kcal"]})]})}),g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{style:{fontSize:13,color:c.isHealthy?"#22c55e":"#ef4444",fontWeight:"bold"},children:c.isHealthy?"+".concat(c.kcal<500?15:10):"+0"}),(0,n.jsx)("button",{onClick:()=>tV(c.id),style:{padding:"6px 10px",borderRadius:8,background:"rgba(239,68,68,0.2)",border:"none",cursor:"pointer",color:"#ef4444",fontSize:12},children:"✕"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>{e1(d),eU(!0)},style:{width:32,height:32,borderRadius:16,border:"none",background:"rgba(34,197,94,0.8)",color:"white",fontSize:18,fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),(0,n.jsx)("button",{onClick:()=>tY(d),style:{padding:"6px 10px",borderRadius:8,background:"transparent",border:"1px solid ".concat(tF.cardBorder),cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:12},children:"\uD83D\uDCA1"})}),(0,n.jsx)("div",{onClick:()=>{var e;return t5(d,!(null==eS?void 0:null===(e=eS.habits)||void 0===e?void 0:e[d]))},style:{padding:"6px 12px",borderRadius:10,background:tF.buttonBg,cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:14,fontWeight:"bold",color:(null==eS?void 0:null===(l=eS.habits)||void 0===l?void 0:l[d])?"#22c55e":tF.text},children:(null==eS?void 0:null===(s=eS.habits)||void 0===s?void 0:s[d])?"✓":"+20"})})]})]})})})},d)}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(34,197,94,0.1), rgba(16,185,129,0.1))",border:"1px solid rgba(34,197,94,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:"\uD83E\uDD57 Repas libres"}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"\uD83D\uDCF7 Photo ou texte (snacks, extras...)"})]}),(0,n.jsx)("button",{onClick:()=>{e1(null),eU(!0)},style:{background:"linear-gradient(135deg, #22c55e, #10b981)",border:"none",borderRadius:10,padding:"8px 14px",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:12,fontWeight:"bold",color:"white"},children:"+ Ajouter"})})]}),(()=>{var e;let t=(null===(e=eS.customMeals)||void 0===e?void 0:e.filter(e=>!e.mealType))||[];return t.length>0?t.map(e=>(0,n.jsx)("div",{style:{background:th?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:12,padding:12,marginBottom:8},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,n.jsx)("span",{style:{fontWeight:"bold",color:tF.text},children:e.name}),(0,n.jsx)("span",{style:{fontSize:9,padding:"2px 6px",borderRadius:4,background:e.isHealthy?"#22c55e":"#ef4444",color:"white",fontWeight:"bold"},children:e.isHealthy?"HEALTHY":"NOT HEALTHY"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginTop:4},children:[(0,n.jsxs)("span",{style:{fontSize:12,color:tF.textMuted},children:[e.kcal," kcal"]}),(0,n.jsxs)("span",{style:{fontSize:12,color:e.isHealthy?"#22c55e":"#ef4444",fontWeight:"bold"},children:[e.isHealthy?"+".concat(e.kcal<500?15:10):"+0"," pts"]})]})]}),(0,n.jsx)("button",{onClick:()=>tV(e.id),style:{background:"rgba(239,68,68,0.2)",border:"none",borderRadius:8,padding:"6px 10px",cursor:"pointer",color:"#ef4444",fontSize:12},children:"✕"})]})},e.id)):(0,n.jsx)("p",{style:{fontSize:12,color:tF.textVeryFaint,textAlign:"center",margin:0},children:"Aucun repas libre"})})()]}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(239,68,68,0.1), rgba(249,115,22,0.1))",border:"1px solid rgba(239,68,68,0.2)",overflow:"hidden"},children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:"0 0 12px",color:tF.text},children:"\uD83C\uDF54 \xc9carts (-10 pts)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:6,width:"100%"},children:E.map(e=>{var t,i;return(0,n.jsxs)("div",{style:{background:th?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:10,padding:8,textAlign:"center",minWidth:0},children:[(0,n.jsx)("span",{style:{fontSize:22},children:e.emoji}),(0,n.jsxs)("p",{style:{fontSize:10,color:tF.textMuted,margin:"2px 0",whiteSpace:"nowrap"},children:[e.kcal," kcal"]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[(0,n.jsx)("button",{onClick:()=>eC(t=>{var i;return{...t,ecarts:{...t.ecarts||{},[e.id]:Math.max(0,((null===(i=t.ecarts)||void 0===i?void 0:i[e.id])||0)-1)}}}),style:{width:26,height:26,minWidth:26,borderRadius:6,border:"none",background:tF.buttonBg,color:tF.text,fontSize:14,cursor:"pointer",padding:0},children:"−"}),(0,n.jsx)("span",{style:{fontSize:16,fontWeight:"bold",minWidth:20,color:((null===(t=eS.ecarts)||void 0===t?void 0:t[e.id])||0)>0?e.color:tF.text},children:(null===(i=eS.ecarts)||void 0===i?void 0:i[e.id])||0}),(0,n.jsx)("button",{onClick:()=>eC(t=>{var i;return{...t,ecarts:{...t.ecarts||{},[e.id]:((null===(i=t.ecarts)||void 0===i?void 0:i[e.id])||0)+1}}}),style:{width:26,height:26,minWidth:26,borderRadius:6,border:"none",background:"".concat(e.color,"40"),color:"white",fontSize:14,cursor:"pointer",padding:0},children:"+"})]})]},e.id)})})]}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(251,191,36,0.1), rgba(245,158,11,0.1))",border:"1px solid rgba(251,191,36,0.2)"},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:"\uD83D\uDE4F Gratitudes"}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"+5 pts si 3 remplies"})]}),(0,n.jsxs)("span",{style:{fontSize:14,color:(eS.gratitudes||[]).filter(e=>null==e?void 0:e.trim()).length>=3?"#22c55e":tF.textMuted},children:[(eS.gratitudes||[]).filter(e=>null==e?void 0:e.trim()).length,"/3"]})]}),[0,1,2].map(e=>{var t;return(0,n.jsx)("input",{value:(null===(t=eS.gratitudes)||void 0===t?void 0:t[e])||"",onChange:t=>t3(e,t.target.value),placeholder:"".concat(e+1,". Je suis reconnaissant pour..."),style:{width:"100%",padding:10,borderRadius:8,border:"none",background:tF.inputBg,color:tF.text,fontSize:16,marginBottom:8,boxSizing:"border-box"}},e)})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{color:tF.textMuted,fontSize:14,marginBottom:10},children:"⚡ \xc9nergie"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:8},children:[{v:1,e:"\uD83D\uDE34",c:"#ef4444"},{v:2,e:"\uD83D\uDE14",c:"#f97316"},{v:3,e:"\uD83D\uDE10",c:"#eab308"},{v:4,e:"\uD83D\uDE42",c:"#22c55e"},{v:5,e:"\uD83D\uDCAA",c:"#14b8a6"}].map(e=>(0,n.jsx)("button",{onClick:()=>eC(t=>({...t,energy:e.v})),style:{padding:12,borderRadius:12,border:"none",cursor:"pointer",background:eS.energy===e.v?e.c:tF.buttonBg,fontSize:24},children:e.e},e.v))})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,n.jsx)("span",{style:{color:tF.textMuted},children:"\uD83C\uDF19 Sommeil"}),(0,n.jsxs)("span",{style:{fontWeight:"bold",color:tF.text},children:[eS.sleep||7,"h"]})]}),(0,n.jsx)("input",{type:"range",min:0,max:9,step:.5,value:eS.sleep||7,onChange:e=>eC(t=>({...t,sleep:Number(e.target.value)})),style:{width:"100%"}})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:8},children:[(0,n.jsx)("span",{style:{color:tF.textMuted},children:"\uD83D\uDE34 Sieste"}),(0,n.jsxs)("span",{style:{fontWeight:"bold",color:tF.text},children:[eS.nap||0," min"]})]}),(0,n.jsx)("input",{type:"range",min:0,max:120,step:15,value:eS.nap||0,onChange:e=>eC(t=>({...t,nap:Number(e.target.value)})),style:{width:"100%"}})]}),(0,n.jsx)("p",{style:{color:tF.textFaint,fontSize:12,marginBottom:8},children:"\uD83C\uDFC3 Activit\xe9 (+5 pts)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,marginBottom:20},children:[{key:"workout",emoji:"\uD83C\uDFCB️",label:"Muscu",color:"#ec4899"},{key:"run",emoji:"\uD83C\uDFC3",label:"Course",color:"#f59e0b"},{key:"walk",emoji:"\uD83D\uDEB6",label:"Marche",color:"#06b6d4"}].map(e=>{var t,i;return(0,n.jsxs)("button",{onClick:()=>{var t;return t4(e.key,!(null===(t=eS.movement)||void 0===t?void 0:t[e.key]))},style:{padding:14,borderRadius:12,border:"none",cursor:"pointer",background:(null===(t=eS.movement)||void 0===t?void 0:t[e.key])?e.color:tF.buttonBg,display:"flex",flexDirection:"column",alignItems:"center",gap:4},children:[(0,n.jsx)("span",{style:{fontSize:24},children:e.emoji}),(0,n.jsx)("span",{style:{color:(null===(i=eS.movement)||void 0===i?void 0:i[e.key])?"white":tF.textMuted,fontSize:12},children:e.label})]},e.key)})})]}),"fasting"===eD&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:20,color:tF.text},children:"⏱️ Je\xfbne Intermittent"}),(0,n.jsxs)("div",{style:{...ia,textAlign:"center",padding:30},children:[(0,n.jsxs)("div",{style:{width:200,height:200,margin:"0 auto 20px",position:"relative"},children:[(0,n.jsxs)("svg",{width:"200",height:"200",style:{transform:"rotate(-90deg)"},children:[(0,n.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:tF.progressBg,strokeWidth:"12"}),(0,n.jsx)("circle",{cx:"100",cy:"100",r:"90",fill:"none",stroke:td>=3600*((null==eS?void 0:null===(p=eS.fastingTimer)||void 0===p?void 0:p.goal)||16)?"#22c55e":"#06b6d4",strokeWidth:"12",strokeLinecap:"round",strokeDasharray:565.5,strokeDashoffset:565.5-565.5*Math.min(1,td/(3600*((null==eS?void 0:null===(P=eS.fastingTimer)||void 0===P?void 0:P.goal)||16)))})]}),(0,n.jsxs)("div",{style:{position:"absolute",inset:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,n.jsx)("p",{style:{fontSize:32,fontWeight:"bold",margin:0,fontFamily:"monospace",color:tF.text},children:(null==eS?void 0:null===(O=eS.fastingTimer)||void 0===O?void 0:O.start)&&!(null==eS?void 0:null===(N=eS.fastingTimer)||void 0===N?void 0:N.end)?"".concat(Math.floor(td/3600).toString().padStart(2,"0"),":").concat(Math.floor(td%3600/60).toString().padStart(2,"0"),":").concat((td%60).toString().padStart(2,"0")):(null==eS?void 0:null===(J=eS.fastingTimer)||void 0===J?void 0:J.end)?"".concat(Math.floor((eS.fastingTimer.end-eS.fastingTimer.start)/36e5),"h ").concat(Math.floor((eS.fastingTimer.end-eS.fastingTimer.start)%36e5/6e4),"min"):"00:00:00"}),(0,n.jsx)("p",{style:{fontSize:12,color:tF.textMuted,margin:"4px 0 0"},children:(null==eS?void 0:null===(L=eS.fastingTimer)||void 0===L?void 0:L.start)&&!(null==eS?void 0:null===(_=eS.fastingTimer)||void 0===_?void 0:_.end)?td>=3600*((null==eS?void 0:null===(V=eS.fastingTimer)||void 0===V?void 0:V.goal)||16)?"\uD83C\uDF89 Objectif atteint !":"Objectif: ".concat((null==eS?void 0:null===(U=eS.fastingTimer)||void 0===U?void 0:U.goal)||16,"h"):(null==eS?void 0:null===(Y=eS.fastingTimer)||void 0===Y?void 0:Y.end)?"✅ Termin\xe9":"Objectif: ".concat((null==eS?void 0:null===(q=eS.fastingTimer)||void 0===q?void 0:q.goal)||16,"h")}),(null==eS?void 0:null===(Z=eS.fastingTimer)||void 0===Z?void 0:Z.start)&&!(null==eS?void 0:null===(G=eS.fastingTimer)||void 0===G?void 0:G.end)&&(0,n.jsxs)("p",{style:{fontSize:14,color:"#22c55e",fontWeight:"bold",margin:"8px 0 0"},children:["\uD83D\uDCB0 ",Math.floor(td/3600)," pts ",Math.floor(td/3600)>=((null==eS?void 0:null===(K=eS.fastingTimer)||void 0===K?void 0:K.goal)||16)?"+ 10 bonus":"(+10 \xe0 ".concat((null==eS?void 0:null===(X=eS.fastingTimer)||void 0===X?void 0:X.goal)||16,"h)")]}),(null==eS?void 0:null===(Q=eS.fasting)||void 0===Q?void 0:Q.points)&&(0,n.jsxs)("p",{style:{fontSize:14,color:"#22c55e",fontWeight:"bold",margin:"8px 0 0"},children:["\uD83D\uDCB0 ",eS.fasting.points," pts gagn\xe9s"]})]})]}),(0,n.jsx)("p",{style:{fontSize:12,color:tF.textMuted,margin:"0 0 10px"},children:"Choisir la dur\xe9e :"}),(0,n.jsx)("div",{style:{display:"flex",gap:8,justifyContent:"center",flexWrap:"wrap",marginBottom:20},children:[12,14,16,18,20,24,36,48].map(e=>{var t,i;return(0,n.jsxs)("button",{onClick:()=>eC(t=>({...t,fastingTimer:{...t.fastingTimer||{},goal:e}})),style:{padding:"8px 14px",borderRadius:8,border:"none",cursor:"pointer",fontSize:13,fontWeight:"bold",background:((null==eS?void 0:null===(t=eS.fastingTimer)||void 0===t?void 0:t.goal)||16)===e?"#06b6d4":tF.buttonBg,color:((null==eS?void 0:null===(i=eS.fastingTimer)||void 0===i?void 0:i.goal)||16)===e?"white":tF.text},children:[e,"h"]},e)})}),(null==eS?void 0:null===($=eS.fastingTimer)||void 0===$?void 0:$.start)&&!(null==eS?void 0:null===(ee=eS.fastingTimer)||void 0===ee?void 0:ee.end)?(0,n.jsx)("button",{onClick:()=>{let e=Date.now(),t=eS.fastingTimer.start,i=Math.floor((e-t)/1e3/60/60),n=eS.fastingTimer.goal||16,r=i+(i>=n?10:0);eC(o=>({...o,fastingTimer:{...o.fastingTimer,end:e},fasting:{completed:i>=n,duration:Math.floor((e-t)/1e3/60),hours:i,points:r}}))},style:{width:"100%",padding:16,borderRadius:12,border:"none",background:"linear-gradient(135deg, #ef4444, #f97316)",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:18},children:"⏹️ Terminer le je\xfbne"}):(null==eS?void 0:null===(et=eS.fastingTimer)||void 0===et?void 0:et.end)?(0,n.jsx)("button",{onClick:()=>eC(e=>{var t;return{...e,fastingTimer:{goal:(null===(t=e.fastingTimer)||void 0===t?void 0:t.goal)||16,start:null,end:null},fasting:null}}),style:{width:"100%",padding:16,borderRadius:12,border:"none",background:tF.buttonBg,color:tF.text,fontWeight:"bold",cursor:"pointer",fontSize:16},children:"\uD83D\uDD04 Nouveau je\xfbne"}):(0,n.jsx)("button",{onClick:()=>eC(e=>({...e,fastingTimer:{...e.fastingTimer||{},start:Date.now(),end:null},fasting:null})),style:{width:"100%",padding:16,borderRadius:12,border:"none",background:"linear-gradient(135deg, #06b6d4, #0891b2)",color:"white",fontWeight:"bold",cursor:"pointer",fontSize:18},children:"\uD83D\uDE80 Commencer le je\xfbne"})]}),(null==eS?void 0:null===(ei=eS.fastingTimer)||void 0===ei?void 0:ei.start)&&(0,n.jsxs)("div",{style:{...ia,display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{style:{background:tF.buttonBg,borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"D\xe9but (modifiable)"}),(0,n.jsx)("input",{type:"time",value:new Date(eS.fastingTimer.start).toTimeString().slice(0,5),onChange:e=>{let[t,i]=e.target.value.split(":").map(Number),n=new Date(eS.fastingTimer.start);n.setHours(t,i,0,0),eC(e=>({...e,fastingTimer:{...e.fastingTimer,start:n.getTime()}}))},style:{fontSize:16,fontWeight:"bold",margin:"4px 0 0",color:tF.text,background:"transparent",border:"1px solid ".concat(tF.cardBorder),borderRadius:8,padding:"4px 8px",textAlign:"center",width:"100%",boxSizing:"border-box"}})]}),(0,n.jsxs)("div",{style:{background:tF.buttonBg,borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"Fin pr\xe9vue"}),(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:"4px 0 0",color:"#06b6d4"},children:new Date(eS.fastingTimer.start+36e5*((null==eS?void 0:null===(en=eS.fastingTimer)||void 0===en?void 0:en.goal)||16)).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]}),(0,n.jsxs)("div",{style:{...ia,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10},children:[(0,n.jsxs)("div",{style:{background:"rgba(6,182,212,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:20,fontWeight:"bold",color:"#06b6d4",margin:0},children:[(null==eS?void 0:null===(er=eS.fastingTimer)||void 0===er?void 0:er.goal)||16,"h"]}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,margin:"4px 0 0"},children:"Objectif"})]}),(0,n.jsxs)("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:20,fontWeight:"bold",color:"#8b5cf6",margin:0},children:Object.values(ej||{}).filter(e=>{var t;return(null===(t=e.fasting)||void 0===t?void 0:t.completed)||e.fastingMorning}).length}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,margin:"4px 0 0"},children:"Je\xfbnes r\xe9ussis"})]}),(0,n.jsxs)("div",{style:{background:"rgba(34,197,94,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:20,fontWeight:"bold",color:"#22c55e",margin:0},children:["+",(null==eS?void 0:null===(eo=eS.fasting)||void 0===eo?void 0:eo.points)||((null==eS?void 0:eS.fastingMorning)?20:0)]}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,margin:"4px 0 0"},children:"Points"})]})]})]}),"week"===eD&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:20,color:tF.text},children:"\uD83D\uDCCA Statistiques"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:20},children:[(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, #f59e0b, #d97706)",borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"white"},children:t6}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:11,margin:"4px 0 0"},children:"\uD83D\uDD25 Streak jours"})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"white"},children:il.avgScore}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:11,margin:"4px 0 0"},children:"\uD83D\uDCCA Moyenne 7j"})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, ".concat(il.weightChange<=0?"#22c55e":"#ef4444",", ").concat(il.weightChange<=0?"#16a34a":"#dc2626",")"),borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"white"},children:[il.weightChange>0?"+":"",il.weightChange]}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:11,margin:"4px 0 0"},children:"⚖️ \xc9volution kg"})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, #06b6d4, #0891b2)",borderRadius:16,padding:16,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"white"},children:[il.successRate,"%"]}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.8)",fontSize:11,margin:"4px 0 0"},children:"\uD83C\uDFAF R\xe9ussite"})]})]}),(0,n.jsxs)("div",{style:{...ia,marginBottom:20},children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 16px"},children:"Score des 7 derniers jours"}),(0,n.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"space-between",height:100,gap:8},children:il.last7Days.map((e,t)=>(0,n.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:6},children:[(0,n.jsx)("span",{style:{fontSize:10,color:e.score>=100?"#fbbf24":tF.text,fontWeight:"bold"},children:e.score?e.score>=100?"✨"+e.score:e.score:""}),(0,n.jsx)("div",{style:{width:"100%",height:"".concat(Math.min(Math.max(e.score,4),100),"%"),background:e.score>=100?"linear-gradient(180deg, #fbbf24, #f59e0b)":e.score>=80?"linear-gradient(180deg, #22c55e, #16a34a)":e.score>=50?"linear-gradient(180deg, #8b5cf6, #7c3aed)":e.score>0?"linear-gradient(180deg, #f59e0b, #d97706)":tF.buttonBg,borderRadius:4,minHeight:4,boxShadow:e.score>=100?"0 0 10px rgba(251,191,36,0.5)":"none"}}),(0,n.jsx)("span",{style:{fontSize:10,color:tF.textMuted},children:e.label})]},t))})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 12px"},children:"\uD83D\uDCC5 Historique (clic pour \xe9diter)"}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4},children:t9.map((e,t)=>{let i=m(e),r=null==ej?void 0:ej[i],o=r?T(r):0;return(0,n.jsxs)("button",{onClick:()=>{ey(i),ek("today")},style:{textAlign:"center",padding:6,borderRadius:10,background:i===em?"#8b5cf6":"transparent",border:"none",cursor:"pointer"},children:[(0,n.jsx)("p",{style:{fontSize:9,color:tF.textFaint,margin:0},children:y(e)}),(0,n.jsx)("p",{style:{fontSize:12,margin:"3px 0",color:i===em?"white":tF.text},children:e.getDate()}),(0,n.jsx)("div",{style:{width:26,height:26,margin:"0 auto",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:"bold",color:"white",background:r?o>=100?"#fbbf24":o>=80?"#10b981":o>=50?"#f59e0b":"#ef4444":tF.buttonBg,boxShadow:o>=100?"0 0 6px rgba(251,191,36,0.5)":"none"},children:r?o:"–"})]},t)})})]}),io.length>1&&(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 12px"},children:"\uD83D\uDCC8 \xc9volution du poids"}),(0,n.jsx)("div",{style:{height:80,display:"flex",alignItems:"flex-end",gap:2},children:io.map((e,t)=>(0,n.jsx)("div",{style:{flex:1,height:"".concat(e.percent,"%"),minHeight:4,background:"linear-gradient(180deg, #8b5cf6, #ec4899)",borderRadius:2},title:"".concat(e.weight," kg")},t))}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:8},children:[(0,n.jsxs)("span",{style:{fontSize:10,color:tF.textMuted},children:[null===(el=io[0])||void 0===el?void 0:el.weight," kg"]}),(0,n.jsxs)("span",{style:{fontSize:10,color:tF.textMuted},children:[null===(es=io[io.length-1])||void 0===es?void 0:es.weight," kg"]})]})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 14px"},children:"✅ Taux de compl\xe9tion"}),il.habitRates.map(e=>(0,n.jsxs)("div",{style:{marginBottom:12},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4},children:[(0,n.jsxs)("span",{style:{fontSize:13,color:tF.text},children:[e.emoji," ",e.name]}),(0,n.jsxs)("span",{style:{fontSize:13,color:tF.textMuted,fontWeight:"bold"},children:[e.rate,"%"]})]}),(0,n.jsx)("div",{style:{height:8,background:tF.progressBg,borderRadius:4,overflow:"hidden"},children:(0,n.jsx)("div",{style:{height:"100%",width:"".concat(e.rate,"%"),background:"linear-gradient(90deg, #8b5cf6, #ec4899)",borderRadius:4}})})]},e.name))]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 14px"},children:"\uD83D\uDCCA Cumuls XP"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(139,92,246,0.15), rgba(168,85,247,0.1))",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"Cette semaine"}),(0,n.jsxs)("p",{style:{fontSize:22,fontWeight:"bold",color:"#8b5cf6",margin:"4px 0 0"},children:[it," pts"]})]}),(0,n.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(6,182,212,0.15), rgba(14,165,233,0.1))",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"Ce mois"}),(0,n.jsxs)("p",{style:{fontSize:22,fontWeight:"bold",color:"#06b6d4",margin:"4px 0 0"},children:[ii," pts"]})]})]})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:tF.text,margin:"0 0 14px"},children:"\uD83C\uDFC6 Records personnels"}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{color:tF.textMuted,fontSize:13},children:"Meilleur score"}),(0,n.jsxs)("span",{style:{color:il.bestScore>=100?"#fbbf24":"#22c55e",fontWeight:"bold",fontSize:16},children:[il.bestScore>=100?"✨ ":"",il.bestScore," pts"]})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{color:tF.textMuted,fontSize:13},children:"Plus long streak"}),(0,n.jsxs)("span",{style:{color:"#f59e0b",fontWeight:"bold",fontSize:16},children:[il.longestStreak," jours"]})]}),il.lowestWeight&&(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{color:tF.textMuted,fontSize:13},children:"Poids le plus bas"}),(0,n.jsxs)("span",{style:{color:"#8b5cf6",fontWeight:"bold",fontSize:16},children:[il.lowestWeight," kg"]})]}),(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("span",{style:{color:tF.textMuted,fontSize:13},children:"Total jours suivis"}),(0,n.jsxs)("span",{style:{color:"#06b6d4",fontWeight:"bold",fontSize:16},children:[ie," jours"]})]})]})]})]}),"plan"===eD&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:14,color:tF.text},children:"Mon Plan"}),(0,n.jsx)("div",{style:ia,children:(0,n.jsxs)("p",{style:{color:tF.textMuted,fontSize:14,margin:0},children:["Plan: ",(0,n.jsxs)("strong",{style:{color:"#10b981"},children:[tQ," kcal"]})," • TDEE: ",(0,n.jsxs)("strong",{style:{color:"#06b6d4"},children:[t1," kcal"]})]})}),Object.entries(F).filter(e=>{let[t]=e;return"fasting"!==t}).map(e=>{let[t,i]=e;return(0,n.jsx)("div",{style:{background:"linear-gradient(135deg, ".concat(i.colors[0],", ").concat(i.colors[1],")"),borderRadius:16,padding:14,marginBottom:10},children:(0,n.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[(0,n.jsx)("div",{style:{width:50,height:50,borderRadius:12,background:"rgba(255,255,255,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:26},children:i.emoji})}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("p",{style:{fontSize:16,fontWeight:"bold",margin:0,color:"white"},children:i.title}),(0,n.jsxs)("span",{style:{fontSize:12,background:"rgba(255,255,255,0.2)",padding:"4px 10px",borderRadius:8,color:"white"},children:[i.kcal," kcal"]})]}),(0,n.jsx)("p",{style:{fontSize:11,margin:"4px 0 0",color:"rgba(255,255,255,0.8)"},children:i.time}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6,marginTop:8},children:i.items.map((e,t)=>(0,n.jsx)("span",{style:{fontSize:10,background:"rgba(255,255,255,0.2)",padding:"4px 8px",borderRadius:6,color:"white"},children:e},t))})]})]})},t)})]}),"stats"===eD&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{style:{fontSize:24,fontWeight:"bold",textAlign:"center",marginBottom:14,color:tF.text},children:"Profil"}),(0,n.jsxs)("div",{style:{...ia,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,n.jsx)("div",{style:{width:40,height:40,borderRadius:20,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:18,color:"white"},children:(null==ec?void 0:null===(ed=ec.displayName)||void 0===ed?void 0:ed[0])||(null==ec?void 0:null===(ea=ec.email)||void 0===ea?void 0:ea[0])||"?"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",margin:0,color:tF.text},children:(null==ec?void 0:ec.displayName)||"Utilisateur"}),(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:null==ec?void 0:ec.email})]})]}),(0,n.jsx)("button",{onClick:tO,style:{background:"rgba(239,68,68,0.2)",border:"none",borderRadius:8,padding:"8px 12px",cursor:"pointer",color:"#ef4444",fontSize:12},children:"D\xe9connexion"})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:10,marginBottom:14},children:[(0,n.jsxs)("div",{style:{background:"#10b981",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0,color:"white"},children:ie}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,color:"rgba(255,255,255,0.8)"},children:"jours"})]}),(0,n.jsxs)("div",{style:{background:"#8b5cf6",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0,color:"white"},children:t6}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,color:"rgba(255,255,255,0.8)"},children:"\uD83D\uDD25 streak"})]}),(0,n.jsxs)("div",{style:{background:"#f59e0b",borderRadius:14,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:26,fontWeight:"bold",margin:0,color:"white"},children:t7}),(0,n.jsx)("p",{style:{fontSize:11,margin:0,color:"rgba(255,255,255,0.8)"},children:"moy"})]})]}),(0,n.jsxs)("div",{style:{...ia,background:"linear-gradient(135deg, rgba(139,92,246,0.1), rgba(236,72,153,0.1))",border:"1px solid rgba(139,92,246,0.2)"},children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 10px"},children:"\uD83C\uDFAF OBJECTIF"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:12},children:[(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"Actuel"}),(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:tF.text},children:[eM.poids," kg"]})]}),(0,n.jsx)("span",{style:{fontSize:24,color:tF.textVeryFaint},children:"→"}),(0,n.jsxs)("div",{style:{flex:1,textAlign:"right"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:0},children:"Objectif"}),(0,n.jsxs)("p",{style:{fontSize:28,fontWeight:"bold",margin:0,color:"#22c55e"},children:[eM.objectifPoids," kg"]})]})]}),(null==t2?void 0:t2.date)&&(0,n.jsx)("div",{style:{background:th?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.05)",borderRadius:10,padding:10},children:(0,n.jsxs)("p",{style:{fontSize:12,color:"#22c55e",margin:0},children:["\uD83D\uDCC8 ",t2.message," → ",t2.date.toLocaleDateString("fr-FR",{day:"numeric",month:"short"})]})})]}),io.length>1&&(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 10px"},children:"\uD83D\uDCCA \xc9VOLUTION"}),(0,n.jsx)("div",{style:{height:100,display:"flex",alignItems:"flex-end",gap:2},children:io.map((e,t)=>(0,n.jsx)("div",{style:{flex:1,height:"".concat(e.percent,"%"),minHeight:4,background:"linear-gradient(180deg, #8b5cf6, #ec4899)",borderRadius:2}},t))})]}),(0,n.jsx)("button",{onClick:()=>{e_(eM.poids),eJ(!0)},style:{width:"100%",padding:14,borderRadius:12,border:"none",cursor:"pointer",background:"#06b6d4",marginBottom:14,color:"white"},children:(0,n.jsx)("span",{style:{fontSize:14,fontWeight:"bold"},children:"⚖️ Enregistrer poids"})}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 10px"},children:"⚙️ PROFIL"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:10},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:tF.textMuted},children:"Poids"}),(0,n.jsx)("input",{type:"number",value:eM.poids,onChange:e=>eR(t=>({...t,poids:""===e.target.value?"":Number(e.target.value)})),onBlur:e=>{(""===e.target.value||isNaN(Number(e.target.value)))&&eR(e=>({...e,poids:75}))},style:{width:"100%",padding:10,borderRadius:8,border:"none",background:tF.inputBg,color:tF.text,marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:"#22c55e"},children:"\uD83C\uDFAF Objectif"}),(0,n.jsx)("input",{type:"number",value:eM.objectifPoids,onChange:e=>eR(t=>({...t,objectifPoids:""===e.target.value?"":Number(e.target.value)})),onBlur:e=>{(""===e.target.value||isNaN(Number(e.target.value)))&&eR(e=>({...e,objectifPoids:70}))},style:{width:"100%",padding:10,borderRadius:8,border:"none",background:"rgba(34,197,94,0.2)",color:"#22c55e",marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:tF.textMuted},children:"Taille (cm)"}),(0,n.jsx)("input",{type:"number",value:eM.taille,onChange:e=>eR(t=>({...t,taille:""===e.target.value?"":Number(e.target.value)})),onBlur:e=>{(""===e.target.value||isNaN(Number(e.target.value)))&&eR(e=>({...e,taille:175}))},style:{width:"100%",padding:10,borderRadius:8,border:"none",background:tF.inputBg,color:tF.text,marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:{fontSize:11,color:tF.textMuted},children:"\xc2ge"}),(0,n.jsx)("input",{type:"number",value:eM.age,onChange:e=>eR(t=>({...t,age:""===e.target.value?"":Number(e.target.value)})),onBlur:e=>{(""===e.target.value||isNaN(Number(e.target.value)))&&eR(e=>({...e,age:30}))},style:{width:"100%",padding:10,borderRadius:8,border:"none",background:tF.inputBg,color:tF.text,marginTop:4,boxSizing:"border-box",fontSize:16}})]}),(0,n.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,n.jsx)("label",{style:{fontSize:11,color:tF.textMuted},children:"Sexe"}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginTop:4},children:[(0,n.jsx)("button",{onClick:()=>eR(e=>({...e,sexe:"homme"})),style:{flex:1,padding:10,borderRadius:8,border:"none",cursor:"pointer",background:"homme"===eM.sexe?"#8b5cf6":tF.inputBg,color:"homme"===eM.sexe?"white":tF.text},children:"♂️ Homme"}),(0,n.jsx)("button",{onClick:()=>eR(e=>({...e,sexe:"femme"})),style:{flex:1,padding:10,borderRadius:8,border:"none",cursor:"pointer",background:"femme"===eM.sexe?"#ec4899":tF.inputBg,color:"femme"===eM.sexe?"white":tF.text},children:"♀️ Femme"})]})]})]})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 10px"},children:"\uD83C\uDFC3 NIVEAU D'ACTIVIT\xc9"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[{key:"sedentaire",label:"S\xe9dentaire",desc:"Peu ou pas d'exercice"},{key:"leger",label:"L\xe9g\xe8rement actif",desc:"Exercice l\xe9ger 1-3j/sem"},{key:"modere",label:"Mod\xe9r\xe9ment actif",desc:"Exercice mod\xe9r\xe9 3-5j/sem"},{key:"actif",label:"Actif",desc:"Exercice intense 6-7j/sem"},{key:"intense",label:"Tr\xe8s actif",desc:"Exercice tr\xe8s intense + travail physique"}].map(e=>(0,n.jsxs)("button",{onClick:()=>eR(t=>({...t,activite:e.key})),style:{padding:12,borderRadius:10,border:"none",cursor:"pointer",background:eM.activite===e.key?"rgba(139,92,246,0.3)":tF.inputBg,textAlign:"left",display:"flex",flexDirection:"column",gap:2},children:[(0,n.jsx)("span",{style:{fontSize:14,fontWeight:"bold",color:eM.activite===e.key?"#8b5cf6":tF.text},children:e.label}),(0,n.jsx)("span",{style:{fontSize:11,color:tF.textMuted},children:e.desc})]},e.key))})]}),(0,n.jsxs)("div",{style:ia,children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 12px"},children:"\uD83D\uDD25 M\xc9TABOLISME"}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[(0,n.jsxs)("div",{style:{background:tF.inputBg,borderRadius:10,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:"0 0 4px"},children:"BMR"}),(0,n.jsx)("p",{style:{fontSize:22,fontWeight:"bold",color:"#f59e0b",margin:0},children:t0}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,margin:0},children:"kcal/jour"})]}),(0,n.jsxs)("div",{style:{background:tF.inputBg,borderRadius:10,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:"0 0 4px"},children:"TDEE"}),(0,n.jsx)("p",{style:{fontSize:22,fontWeight:"bold",color:"#06b6d4",margin:0},children:t1}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,margin:0},children:"kcal/jour"})]})]}),(0,n.jsx)("div",{style:{background:"rgba(34,197,94,0.1)",borderRadius:10,padding:12},children:(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:"0 0 2px"},children:"\uD83D\uDCC9 Pour perdre ~0.5kg/sem"}),(0,n.jsxs)("p",{style:{fontSize:18,fontWeight:"bold",color:"#22c55e",margin:0},children:[t1-500," kcal/jour"]})]}),(0,n.jsxs)("div",{style:{textAlign:"right"},children:[(0,n.jsx)("p",{style:{fontSize:11,color:tF.textMuted,margin:"0 0 2px"},children:"D\xe9ficit"}),(0,n.jsx)("p",{style:{fontSize:14,fontWeight:"bold",color:"#ef4444",margin:0},children:"-500 kcal"})]})]})}),(0,n.jsx)("p",{style:{fontSize:10,color:tF.textMuted,marginTop:10,textAlign:"center"},children:"BMR = m\xe9tabolisme de base • TDEE = avec activit\xe9"})]})]})]}),(0,n.jsx)("nav",{style:{position:"fixed",bottom:0,left:0,right:0,background:tF.navBg,backdropFilter:"blur(10px)",borderTop:"1px solid ".concat(tF.cardBorder),display:"flex",justifyContent:"space-around",padding:"8px 0 24px",zIndex:9999},children:[{id:"today",icon:"\uD83C\uDFE0",label:"Aujourd'hui"},{id:"fasting",icon:"⏱️",label:"Je\xfbne"},{id:"week",icon:"\uD83D\uDCC5",label:"Stats"},{id:"stats",icon:"⚙️",label:"Profil"}].map(e=>(0,n.jsxs)("button",{onClick:()=>ek(e.id),style:{display:"flex",flexDirection:"column",alignItems:"center",gap:4,background:"none",border:"none",cursor:"pointer",padding:6},children:[(0,n.jsx)("div",{style:{width:40,height:40,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center",background:eD===e.id?"#8b5cf6":"transparent"},children:(0,n.jsx)("span",{style:{fontSize:18},children:e.icon})}),(0,n.jsx)("span",{style:{fontSize:10,color:eD===e.id?"#8b5cf6":tF.textMuted},children:e.label})]},e.id))}),eN&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>eJ(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:320,width:"100%"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:"⚖️ Pes\xe9e"}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:16,marginBottom:20},children:[(0,n.jsx)("button",{onClick:()=>e_(e=>Math.max(40,Math.round((e-.1)*10)/10)),style:{width:50,height:50,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:24,cursor:"pointer"},children:"−"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{style:{fontSize:40,fontWeight:"bold"},children:eL.toFixed(1)}),(0,n.jsx)("span",{style:{fontSize:18,color:"rgba(255,255,255,0.5)",marginLeft:4},children:"kg"})]}),(0,n.jsx)("button",{onClick:()=>e_(e=>Math.min(200,Math.round((e+.1)*10)/10)),style:{width:50,height:50,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:24,cursor:"pointer"},children:"+"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:()=>eJ(!1),style:{flex:1,padding:14,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",cursor:"pointer"},children:"Annuler"}),(0,n.jsx)("button",{onClick:()=>tN(eL),style:{flex:1,padding:14,borderRadius:12,border:"none",background:"#06b6d4",color:"white",fontWeight:"bold",cursor:"pointer"},children:"OK"})]})]})}),eV&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>{eU(!1),eX(null),eq(""),e$(null)},children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:"\uD83E\uDD57 Ajouter un repas"}),(0,n.jsx)("button",{onClick:()=>{var e;return null===(e=tW.current)||void 0===e?void 0:e.click()},style:{width:"100%",padding:14,borderRadius:12,border:"2px dashed rgba(255,255,255,0.2)",background:"transparent",color:"white",cursor:"pointer",marginBottom:12},children:"\uD83D\uDCF7 Prendre une photo"}),(0,n.jsx)("input",{ref:tW,type:"file",accept:"image/*",capture:"environment",onChange:tJ,style:{display:"none"}}),eQ&&(0,n.jsx)("img",{src:eQ,alt:"Repas",style:{width:"100%",borderRadius:12,marginBottom:12}}),(0,n.jsx)("textarea",{value:eY,onChange:e=>eq(e.target.value),placeholder:"Ou d\xe9cris ton repas...",style:{width:"100%",padding:12,borderRadius:10,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16,minHeight:60,resize:"none",boxSizing:"border-box",marginBottom:12}}),!eK&&(0,n.jsx)("button",{onClick:tL,disabled:eZ||!eY.trim()&&!eQ,style:{width:"100%",padding:14,borderRadius:12,border:"none",cursor:"pointer",background:eZ?"rgba(255,255,255,0.1)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontWeight:"bold",marginBottom:12},children:eZ?"\uD83E\uDD16 Analyse...":"\uD83E\uDD16 Analyser"}),eK&&(0,n.jsxs)("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:12,padding:14,marginBottom:16},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[(0,n.jsx)("span",{style:{fontSize:20},children:eK.isHealthy?"✅":"⚠️"}),(0,n.jsx)("span",{style:{fontSize:16,fontWeight:"bold"},children:eK.name})]}),(0,n.jsx)("p",{style:{fontSize:12,color:"rgba(255,255,255,0.6)",margin:"0 0 12px"},children:eK.details}),(0,n.jsxs)("div",{style:{display:"flex",gap:16},children:[(0,n.jsxs)("div",{style:{flex:1,background:"rgba(34,197,94,0.1)",borderRadius:8,padding:10,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:20,fontWeight:"bold",color:"#22c55e",margin:0},children:eK.kcal}),(0,n.jsx)("p",{style:{fontSize:10,color:"rgba(255,255,255,0.5)",margin:0},children:"kcal"})]}),(0,n.jsxs)("div",{style:{flex:1,background:"rgba(139,92,246,0.1)",borderRadius:8,padding:10,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:20,fontWeight:"bold",color:"#8b5cf6",margin:0},children:["+",eK.points]}),(0,n.jsx)("p",{style:{fontSize:10,color:"rgba(255,255,255,0.5)",margin:0},children:"pts"})]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:()=>{eU(!1),eX(null),eq(""),e$(null)},style:{flex:1,padding:14,borderRadius:12,border:"none",background:"rgba(255,255,255,0.1)",color:"white",cursor:"pointer"},children:"Annuler"}),eK&&(0,n.jsx)("button",{onClick:t_,style:{flex:1,padding:14,borderRadius:12,border:"none",background:"#22c55e",color:"white",fontWeight:"bold",cursor:"pointer"},children:"Ajouter"})]})]})}),eT&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>eB(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:0},children:"\uD83E\uDD16 Analyse IA"}),(0,n.jsx)("button",{onClick:()=>eB(!1),style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:10,marginBottom:16},children:[(0,n.jsx)("button",{onClick:()=>tU("week"),style:{flex:1,padding:12,borderRadius:10,border:"none",cursor:"pointer",background:"week"===eE?"#8b5cf6":"rgba(255,255,255,0.1)",color:"white",fontWeight:"bold"},children:"7 jours"}),(0,n.jsx)("button",{onClick:()=>tU("month"),style:{flex:1,padding:12,borderRadius:10,border:"none",cursor:"pointer",background:"month"===eE?"#8b5cf6":"rgba(255,255,255,0.1)",color:"white",fontWeight:"bold"},children:"30 jours"})]}),eF?(0,n.jsx)("p",{style:{textAlign:"center",color:"rgba(255,255,255,0.5)"},children:"Analyse..."}):(0,n.jsx)("div",{style:{fontSize:14,color:"rgba(255,255,255,0.9)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:eW})]})}),tb&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>tf(!1),children:(0,n.jsxs)("div",{style:{background:tF.modalBg,borderRadius:20,padding:20,maxWidth:420,width:"100%",maxHeight:"85vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:0,color:tF.text},children:"\uD83D\uDCA1 Id\xe9es recettes"}),(0,n.jsx)("button",{onClick:()=>tf(!1),style:{background:"none",border:"none",color:tF.textMuted,fontSize:24,cursor:"pointer"},children:"\xd7"})]}),(0,n.jsx)("p",{style:{fontSize:12,color:tF.textMuted,margin:"0 0 16px"},children:tD&&F[tD]?"Pour votre ".concat(F[tD].title.toLowerCase()):"Suggestions personnalis\xe9es"}),tm?(0,n.jsx)("div",{style:{textAlign:"center",padding:40},children:(0,n.jsx)("p",{style:{color:tF.textMuted},children:"\uD83C\uDF73 G\xe9n\xe9ration des recettes..."})}):0===tj.length?(0,n.jsx)("p",{style:{textAlign:"center",color:tF.textMuted,padding:20},children:"Aucune recette disponible"}):(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:16},children:tj.map((e,t)=>(0,n.jsxs)("div",{style:{background:tF.card,borderRadius:16,padding:16,border:"1px solid ".concat(tF.cardBorder)},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[(0,n.jsx)("div",{style:{width:48,height:48,borderRadius:12,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:24},children:e.emoji||"\uD83C\uDF7D️"})}),(0,n.jsxs)("div",{style:{flex:1},children:[(0,n.jsx)("p",{style:{fontSize:15,fontWeight:"bold",margin:0,color:tF.text},children:e.name}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,marginTop:4},children:[(0,n.jsxs)("span",{style:{fontSize:11,background:"rgba(6,182,212,0.2)",color:"#06b6d4",padding:"3px 8px",borderRadius:6},children:["⏱️ ",e.prepTime,"number"==typeof e.prepTime?" min":""]}),(0,n.jsxs)("span",{style:{fontSize:11,background:"rgba(249,115,22,0.2)",color:"#f97316",padding:"3px 8px",borderRadius:6},children:["\uD83D\uDD25 ",e.kcal||e.calories," kcal"]})]})]})]}),(0,n.jsxs)("div",{style:{marginBottom:12},children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 8px"},children:"\uD83D\uDCDD Ingr\xe9dients"}),(0,n.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:6},children:(e.ingredients||[]).map((e,t)=>(0,n.jsxs)("span",{style:{fontSize:11,background:"rgba(139,92,246,0.15)",color:"#a78bfa",padding:"4px 10px",borderRadius:8},children:["• ",e]},t))})]}),e.steps&&e.steps.length>0&&(0,n.jsxs)("div",{style:{marginBottom:12},children:[(0,n.jsx)("p",{style:{fontSize:12,fontWeight:"bold",color:tF.textMuted,margin:"0 0 8px"},children:"\uD83D\uDC68‍\uD83C\uDF73 Pr\xe9paration"}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6},children:e.steps.map((e,t)=>(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"flex-start"},children:[(0,n.jsx)("span",{style:{width:20,height:20,borderRadius:10,background:"rgba(34,197,94,0.2)",color:"#22c55e",display:"flex",alignItems:"center",justifyContent:"center",fontSize:10,fontWeight:"bold",flexShrink:0},children:t+1}),(0,n.jsx)("p",{style:{fontSize:12,color:tF.text,margin:0,lineHeight:1.4},children:e})]},t))})]}),e.tip&&(0,n.jsx)("div",{style:{background:"rgba(251,191,36,0.1)",border:"1px solid rgba(251,191,36,0.2)",borderRadius:10,padding:10},children:(0,n.jsxs)("p",{style:{fontSize:11,color:"#fbbf24",margin:0,fontStyle:"italic"},children:["\uD83D\uDCA1 ",e.tip]})})]},t))}),(0,n.jsx)("button",{onClick:()=>tY(tD),disabled:tm,style:{width:"100%",marginTop:16,padding:14,borderRadius:12,border:"none",background:tm?tF.buttonBg:"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontWeight:"bold",cursor:"pointer"},children:tm?"...":"\uD83D\uDD04 Nouvelles id\xe9es"})]})}),tS&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>tC(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:400,width:"100%",maxHeight:"85vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[(0,n.jsx)("h2",{style:{fontSize:20,fontWeight:"bold",margin:0},children:"\uD83D\uDCCA Rapport Hebdo"}),(0,n.jsx)("button",{onClick:()=>tC(!1),style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),tT&&(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:10,marginBottom:16},children:[(0,n.jsxs)("div",{style:{background:"rgba(139,92,246,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:24,fontWeight:"bold",color:"#8b5cf6",margin:0},children:tT.avgScore}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0 0"},children:"Score moyen"})]}),(0,n.jsxs)("div",{style:{background:"rgba(34,197,94,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:24,fontWeight:"bold",color:"#22c55e",margin:0},children:[tT.days,"/7"]}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0 0"},children:"Jours suivis"})]}),(0,n.jsxs)("div",{style:{background:"rgba(6,182,212,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsxs)("p",{style:{fontSize:24,fontWeight:"bold",color:"#06b6d4",margin:0},children:[tT.avgSleep,"h"]}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0 0"},children:"Sommeil moy."})]}),(0,n.jsxs)("div",{style:{background:"rgba(249,115,22,0.1)",borderRadius:12,padding:12,textAlign:"center"},children:[(0,n.jsx)("p",{style:{fontSize:24,fontWeight:"bold",color:"#f97316",margin:0},children:tT.workoutDays}),(0,n.jsx)("p",{style:{fontSize:11,color:"rgba(255,255,255,0.5)",margin:"4px 0 0"},children:"Jours sport"})]})]}),tz?(0,n.jsx)("div",{style:{textAlign:"center",padding:40},children:(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.5)"},children:"\uD83D\uDCDD G\xe9n\xe9ration du rapport..."})}):(0,n.jsx)("div",{style:{fontSize:14,color:"rgba(255,255,255,0.9)",lineHeight:1.7,whiteSpace:"pre-wrap"},children:tM}),(0,n.jsx)("button",{onClick:tq,disabled:tz,style:{width:"100%",marginTop:16,padding:14,borderRadius:12,border:"none",background:tz?"rgba(255,255,255,0.1)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:"white",fontWeight:"bold",cursor:"pointer"},children:tz?"...":"\uD83D\uDD04 R\xe9g\xe9n\xe9rer"})]})}),e2&&(0,n.jsxs)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.95)",zIndex:1e4,display:"flex",flexDirection:"column"},children:[(0,n.jsxs)("div",{style:{padding:16,borderBottom:"1px solid rgba(255,255,255,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)("h2",{style:{fontSize:18,fontWeight:"bold",margin:0},children:"\uD83C\uDF99️ Coach Zen"}),(0,n.jsx)("button",{onClick:()=>e5(!1),style:{background:"none",border:"none",color:"rgba(255,255,255,0.5)",fontSize:24,cursor:"pointer"},children:"\xd7"})]}),(0,n.jsxs)("div",{style:{flex:1,overflow:"auto",padding:16},children:[0===e4.length&&(0,n.jsxs)("div",{style:{textAlign:"center",paddingTop:40},children:[(0,n.jsx)("div",{style:{width:80,height:80,borderRadius:40,background:"linear-gradient(135deg, #8b5cf6, #ec4899)",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsx)("span",{style:{fontSize:40},children:"\uD83E\uDDD8"})}),(0,n.jsx)("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:16},children:"Salut ! Je connais tout ton parcours."}),(0,n.jsx)("div",{style:{marginTop:20,display:"flex",flexWrap:"wrap",gap:8,justifyContent:"center"},children:["Comment je progresse ?","Conseils pour aujourd'hui","Analyse mes habitudes"].map((e,t)=>(0,n.jsx)("button",{onClick:()=>tZ(e),style:{padding:"8px 14px",borderRadius:20,background:"rgba(255,255,255,0.1)",border:"none",color:"white",fontSize:12,cursor:"pointer"},children:e},t))})]}),e4.map((e,t)=>(0,n.jsx)("div",{style:{marginBottom:12,display:"flex",justifyContent:"user"===e.role?"flex-end":"flex-start"},children:(0,n.jsx)("div",{style:{maxWidth:"80%",padding:12,borderRadius:16,background:"user"===e.role?"#8b5cf6":"rgba(255,255,255,0.1)"},children:(0,n.jsx)("p",{style:{fontSize:14,margin:0,lineHeight:1.5},children:e.content})})},t)),e9&&(0,n.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:(0,n.jsx)("div",{style:{padding:12,borderRadius:16,background:"rgba(255,255,255,0.1)"},children:(0,n.jsx)("p",{style:{margin:0},children:"..."})})})]}),(0,n.jsxs)("div",{style:{padding:16,borderTop:"1px solid rgba(255,255,255,0.1)",display:"flex",gap:10},children:[(0,n.jsx)("button",{onClick:tG,style:{width:50,height:50,borderRadius:25,border:"none",background:te?"#ef4444":"#06b6d4",cursor:"pointer"},children:(0,n.jsx)("span",{style:{fontSize:20},children:te?"\uD83D\uDD34":"\uD83C\uDF99️"})}),(0,n.jsx)("input",{value:e3,onChange:e=>e6(e.target.value),onKeyDown:e=>"Enter"===e.key&&tZ(e3),placeholder:"Message...",enterKeyHint:"send",autoComplete:"off",style:{flex:1,padding:14,borderRadius:25,border:"none",background:"rgba(255,255,255,0.1)",color:"white",fontSize:16}}),(0,n.jsx)("button",{onClick:()=>tZ(e3),disabled:!e3.trim(),style:{width:50,height:50,borderRadius:25,border:"none",background:e3.trim()?"#8b5cf6":"rgba(255,255,255,0.1)",cursor:"pointer"},children:(0,n.jsx)("span",{children:"→"})})]})]}),tl&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.85)",zIndex:1e4,display:"flex",alignItems:"center",justifyContent:"center",padding:20},onClick:()=>ts(!1),children:(0,n.jsxs)("div",{style:{background:"#1e293b",borderRadius:20,padding:20,maxWidth:380,width:"100%",maxHeight:"80vh",overflow:"auto"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("h2",{style:{fontSize:20,fontWeight:"bold",margin:"0 0 16px",textAlign:"center"},children:["\uD83C\uDFC6 Badges (",tr.length,"/",A.length,")"]}),(0,n.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:A.map(e=>(0,n.jsxs)("div",{style:{background:tr.includes(e.id)?"rgba(139,92,246,0.2)":"rgba(255,255,255,0.05)",borderRadius:12,padding:12,textAlign:"center",opacity:tr.includes(e.id)?1:.4},children:[(0,n.jsx)("span",{style:{fontSize:28},children:e.emoji}),(0,n.jsx)("p",{style:{fontSize:11,fontWeight:"bold",margin:"4px 0 0"},children:e.name}),(0,n.jsx)("p",{style:{fontSize:9,color:"rgba(255,255,255,0.5)",margin:"2px 0 0"},children:e.desc})]},e.id))})]})}),ti&&(0,n.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.9)",zIndex:10001,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,n.jsxs)("div",{style:{textAlign:"center"},children:[(0,n.jsx)("span",{style:{fontSize:80},children:ti.emoji}),(0,n.jsx)("h2",{style:{fontSize:24,fontWeight:"bold",margin:"16px 0 8px"},children:"\uD83C\uDF89 Badge d\xe9bloqu\xe9 !"}),(0,n.jsx)("p",{style:{fontSize:18,color:"#a78bfa"},children:ti.name}),(0,n.jsx)("p",{style:{fontSize:14,color:"rgba(255,255,255,0.5)"},children:ti.desc})]})})]}):(0,n.jsx)("div",{style:is,children:(0,n.jsx)("div",{style:id,children:(0,n.jsx)("p",{style:{textAlign:"center",paddingTop:100},children:"Chargement des donn\xe9es..."})})}):(0,n.jsx)(H,{})}}},function(e){e.O(0,[117,609,67,971,23,744],function(){return e(e.s=6174)}),_N_E=e.O()}]);